<?php
 namespace app\mp\logic; use think\Debug; use think\Db; use think\Log; use think\Request; use think\Session; use app\index\logic\Defs as IndexDefs; use app\mp\service\Subjects; use app\Defs; use app\index\logic\Subject as SubjectLogic; use EasyWeChat\Factory; use app\index\service\EventLogs as EventLogsService; class UniApp extends Base { public function login($channel, $code = '') { goto gToQy; lzEvG: IhX9l: goto FmpDt; gToQy: if ($channel == "\x42\101\x49\x44\125") { goto IPX2x; } goto XdDY7; WST7C: $sessionKey = "\x73\145\163\163\151\x6f\156\x5f\153\145\171"; goto vvU3j; iBZFI: $openid = $loginResult["\157\x70\145\156\x69\144"]; goto gbrYp; vvU3j: $channel = "\110\x35"; goto OY6ep; LyKtY: return ["\163\x65\163\x73\151\x6f\156\x5f\x6b\145\171" => $sessionKey, "\x68\145\141\144\151\x6d\x67\137\165\162\x6c" => $headimgUrl]; goto ZPv_B; F6ftV: IPX2x: goto fmke5; k4wyn: $loginResult = $this->_loginWeixin($code); goto lZt1D; v6LRR: $user = Db::table("\165\x6e\x69\x5f\141\x70\160\x5f\x75\163\x65\x72\163")->where("\x6f\x70\x65\156\151\144", $openid)->field(true)->find(); goto ePM0J; ePM0J: if ($user) { goto Jmczi; } goto YjQee; fmke5: $loginResult = $this->_loginBaidu($code); goto iBZFI; XdDY7: if ($channel == "\127\x45\x49\x58\x49\x4e") { goto f5zK6; } goto xOfZR; lZt1D: $openid = $loginResult["\157\160\145\x6e\x69\144"]; goto v1NQQ; OY6ep: goto E1AIv; goto eu9gJ; csUGS: Jmczi: goto C4u93; siPmw: $headimgUrl = generateUploadFullUrl("\57\x73\164\141\x74\151\143\57\x69\155\147\x2f\141\166\141\x74\141\162\x2e\x70\x6e\x67"); goto v6LRR; uekt6: if (!$user["\150\145\x61\x64\x69\x6d\x67\x5f\165\162\154"]) { goto IhX9l; } goto xbNXT; YjQee: Db::table("\x75\156\151\137\141\x70\160\137\165\x73\x65\x72\x73")->insert(["\157\x70\x65\x6e\x69\144" => $openid, "\x73\x65\x73\163\151\157\x6e\137\x6b\x65\x79" => $sessionKey, "\x72\145\147\151\163\164\145\162\137\x74\x69\155\x65" => Db::raw("\x6e\x6f\167\x28\x29"), "\x6c\141\164\x65\163\x74\x5f\x6c\x6f\147\151\156\137\x74\151\155\x65" => Db::raw("\x6e\157\167\50\x29"), "\143\150\x61\x6e\x6e\145\154" => $channel]); goto tiX3h; R93x0: t8yIN: goto siPmw; tiX3h: goto EwOs7; goto csUGS; ACwj6: goto t8yIN; goto F6ftV; liQfR: E1AIv: goto ACwj6; gbrYp: $sessionKey = $loginResult["\x73\x65\x73\x73\151\157\156\137\x6b\145\x79"]; goto R93x0; xOfZR: $openid = "\x6f\x70\145\156\151\x64"; goto WST7C; C4u93: Db::table("\165\156\x69\137\141\x70\160\x5f\165\163\145\x72\163")->where("\x6f\160\145\156\151\144", $openid)->update(["\x73\145\163\x73\x69\157\156\137\153\x65\171" => $sessionKey, "\x6c\x61\x74\145\x73\x74\x5f\154\x6f\147\x69\156\137\164\x69\x6d\x65" => Db::raw("\x6e\157\x77\x28\51")]); goto uekt6; xbNXT: $headimgUrl = generateUploadFullUrl($user["\150\x65\141\144\x69\155\147\137\165\162\154"]); goto lzEvG; FmpDt: EwOs7: goto LyKtY; eu9gJ: f5zK6: goto k4wyn; v1NQQ: $sessionKey = $loginResult["\x73\x65\x73\163\151\157\156\x5f\153\145\x79"]; goto liQfR; ZPv_B: } private function _loginBaidu($code) { goto SHAoE; KTyCW: exception("\346\227\240\346\xb3\x95\350\xa7\243\xe6\x9e\220\xe5\272\x94\347\255\x94\x3a\x20" . $output); goto V7hLF; uO8KB: curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE); goto w3Rhm; w3Rhm: curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, FALSE); goto keyu6; vGI00: elLOJ: goto vispW; qz_5R: Log::notice("\142\x61\x69\x64\x75\x20\x6f\x61\165\x74\x68\40\x72\145\x71\165\145\163\x74\72\40" . var_export($postDataArr, true)); goto TKouQ; KPLoA: if (!($httpCode != "\62\60\60")) { goto bwkSY; } goto N37KT; vispW: $httpCode = curl_getinfo($curl, CURLINFO_HTTP_CODE); goto y8jCT; V7hLF: Afehq: goto s8u10; Tptqk: exception("\xe6\227\240\xe6\xb3\x95\350\x8e\267\xe5\276\x97\xe7\231\xbe\345\xba\xa6\346\x9c\x8d\345\x8a\xa1\345\231\xa8\xe5\272\224\347\255\224\54\x20{$errCode}\40\x2d\x20{$errMsg}"); goto vGI00; czl28: $url .= "\x3f"; goto D9WOH; N37KT: exception("\xe7\231\276\345\272\246\xe5\xba\224\xe7\xad\x94\150\x74\x74\160\x20\x63\x6f\x64\x65\x3a\40{$httpCode}"); goto qiz54; GLX9K: $openid = $jsonObj["\x6f\x70\145\156\x69\x64"]; goto J0_qF; w4_Qq: $jsonObj = json_decode($output, true); goto NQgLN; rwgSt: curl_setopt($curl, CURLOPT_URL, $url); goto uO8KB; s8u10: if (isset($jsonObj["\157\160\145\x6e\x69\x64"])) { goto DY7_z; } goto I5POs; TKouQ: $curl = curl_init(); goto rwgSt; S7NjN: DY7_z: goto GLX9K; WICIA: $output = curl_exec($curl); goto SYJpL; pRged: $errCode = curl_errno($curl); goto TqDzB; u0Oi6: $postDataArr = array("\x63\157\x64\x65" => $code, "\143\x6c\x69\145\x6e\x74\x5f\x69\144" => "\167\x49\107\65\101\x6f\161\x6a\x4c\x51\x64\x42\x56\111\124\x7a\x59\164\x58\170\111\170\104\x44\x45\x30\161\x39\x52\107\x42\116", "\163\x6b" => "\x47\121\101\x38\x39\x75\x53\130\166\117\x46\67\127\114\x4c\x51\x68\156\x42\x63\x6e\x6e\x59\x37\x4e\x62\61\x53\x4e\125\x77\144"); goto DxAhQ; keyu6: curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); goto WICIA; PlWC8: curl_close($curl); goto Tptqk; SYJpL: if (!empty($output)) { goto elLOJ; } goto pRged; bhpch: return ["\157\160\x65\156\151\144" => $openid, "\x73\x65\x73\163\151\157\156\137\153\145\171" => $sessionKey]; goto ljnCN; TqDzB: $errMsg = curl_error($curl); goto PlWC8; Ec2fO: Log::notice("\x62\x61\x69\144\x75\40\157\141\x75\x74\150\40\x72\145\163\x70\x6f\x6e\x73\145\72\40{$output}"); goto w4_Qq; I5POs: exception("\346\227\240\346\263\225\xe8\247\xa3\xe6\236\x90\x6f\x70\x65\156\151\x64\x3a\40" . $output); goto S7NjN; y8jCT: curl_close($curl); goto KPLoA; NQgLN: if (!empty($jsonObj)) { goto Afehq; } goto KTyCW; D9WOH: $url .= http_build_query($postDataArr); goto qz_5R; DxAhQ: $headerArr = array("\x43\157\156\164\145\x6e\x74\55\164\x79\160\145\72\141\160\160\x6c\151\x63\x61\164\x69\157\x6e\x2f\x78\x2d\x77\167\x77\55\x66\x6f\162\x6d\x2d\165\x72\x6c\x65\x6e\143\x6f\144\x65\144"); goto czl28; J0_qF: $sessionKey = $jsonObj["\x73\145\x73\163\x69\157\156\137\x6b\x65\x79"]; goto bhpch; SHAoE: $url = "\150\x74\x74\x70\163\x3a\57\x2f\x73\160\x61\x70\151\x2e\142\141\x69\x64\x75\x2e\143\x6f\155\x2f\157\x61\165\x74\150\57\x6a\x73\143\157\144\145\62\x73\x65\163\163\151\x6f\x6e\x6b\145\x79"; goto u0Oi6; qiz54: bwkSY: goto Ec2fO; ljnCN: } private function _loginWeixin($code) { goto oE1dg; zTlOy: if (!(!isset($wxUser["\157\160\x65\156\151\144"]) || !isset($wxUser["\163\145\x73\x73\x69\x6f\x6e\137\x6b\145\171"]))) { goto UjfAm; } goto JXdIs; ZpTGl: Log::notice("\x77\x65\151\170\151\156\x20\157\x61\x75\164\x68\x20\162\x65\x73\160\x6f\156\163\x65\72\x20" . var_export($wxUser, true)); goto rEUMC; qGnvW: UjfAm: goto ZpTGl; fMfjM: $wxUser = $app->auth->session($code); goto VGLvE; JXdIs: exception("\xe5\xbe\256\xe4\277\xa1\xe7\x99\273\345\xbd\225\345\xa4\xb1\350\264\xa5\72\40" . var_export($wxUser, true)); goto qGnvW; oCIoE: $sessionKey = $wxUser["\163\x65\x73\163\x69\x6f\x6e\137\x6b\145\171"]; goto zxX4o; VGLvE: if ($wxUser) { goto ML6yI; } goto kS88m; zxX4o: return ["\157\160\145\156\151\x64" => $openid, "\163\145\163\x73\x69\157\x6e\x5f\153\145\171" => $sessionKey]; goto oN97y; rEUMC: $openid = $wxUser["\x6f\x70\145\156\151\144"]; goto oCIoE; F0v1_: $app = Factory::miniProgram(config("\x77\x78\56\x6d\x69\156\x69\137\160\x72\157\x67\162\141\x6d")); goto fMfjM; oE1dg: wxPaySetting(); goto F0v1_; kS88m: exception("\xe5\xbe\256\344\xbf\xa1\xe7\x99\273\345\275\x95\xe5\xba\224\347\255\224\xe4\xb8\272\347\251\xba"); goto dJ6cu; dJ6cu: ML6yI: goto zTlOy; oN97y: } public function logout($session_key) { Db::table("\x75\x6e\x69\x5f\x61\160\x70\x5f\x75\x73\x65\162\163")->where("\163\145\x73\x73\x69\x6f\x6e\x5f\153\145\171", $session_key)->update(["\x73\145\x73\x73\151\157\x6e\x5f\153\x65\171" => '']); } public function subjectsPopular() { goto n_cTE; n_cTE: $rows = Db::query("\163\145\x6c\145\143\164\x20\x69\144\x2c\x20\x6e\x61\155\145\54\x20\163\x75\x62\x74\151\164\154\145\54\40\151\155\141\x67\145\137\165\x72\x6c\54\x20\x62\x61\156\156\145\x72\x5f\151\x6d\147\x2c\40\x69\x74\145\155\x73\54\x20\x70\141\162\x74\x69\x63\x69\x70\x61\x6e\164\163\x5f\163\150\x6f\x77\x20\141\163\40\x70\x61\162\164\151\x63\x69\x70\x61\x6e\x74\163\x2c\x20\143\x75\x72\x72\145\x6e\x74\x5f\160\x72\x69\143\145\x20\xd\xa\11\x9\11\x9\11\x9\x9\146\162\157\155\x20\163\x75\x62\152\145\x63\x74\x20\xd\xa\11\11\11\11\x9\x9\x9\167\150\145\x72\145\x20\x46\x49\x4e\x44\x5f\x49\116\x5f\123\x45\124\50\x27\x70\x6f\x70\x75\x6c\141\162\47\x2c\x20\154\141\x62\145\x6c\x29\x20\x61\156\x64\x20\144\145\x6c\x65\164\145\137\x66\154\x61\147\x3d\60\40\141\x6e\x64\40\x73\x74\141\x74\165\163\x3d" . IndexDefs::ENTITY_PUBLISH_STATUS . "\40\x61\x6e\x64\40\x75\x6e\x69\137\x61\160\160\x3d\x31\15\12\x9\x9\x9\11\x9\11\x9\117\x52\104\x45\122\40\102\x59\x20\x52\101\116\x44\50\x29\x20\114\x49\115\x49\124\40\64"); goto b7OLk; kAnic: HjiZc: goto aDIB0; b7OLk: foreach ($rows as &$row) { goto chzTJ; Xv5UK: nM3jP: goto gN2GY; Suq9x: $categoryNames = Db::table("\163\x75\142\x6a\x65\x63\164\x5f\x63\x61\164\145\147\x6f\162\x79\x5f\x72\145\154\141\x74\145")->alias("\x53\103\122")->join("\143\141\x74\145\147\157\162\x69\x65\163\x20\x43", "\x53\x43\x52\56\x63\x61\164\145\147\157\x72\171\137\151\x64\x3d\x43\56\x69\x64\x20\141\156\x64\x20\x53\103\122\x2e\x73\165\142\x6a\x65\x63\x74\137\x69\x64\x3d" . $row["\151\144"])->column("\103\56\156\141\x6d\145"); goto eBbWX; chzTJ: $imageUrl = $row["\151\155\x61\x67\145\x5f\165\x72\154"]; goto qXpCh; YuS3Y: $row["\160\x61\x72\164\x69\143\151\160\x61\x6e\x74\163"] = formatTimes($row["\160\141\x72\164\x69\x63\151\x70\x61\156\x74\x73"]); goto Suq9x; eBbWX: $row["\143\141\164\145\x67\x6f\162\x79\137\156\141\x6d\x65\163"] = $categoryNames; goto Xv5UK; PvGpW: $row["\142\x61\156\x6e\145\162\x5f\x69\x6d\147"] = generateUploadFullUrl(generateThumbnailUrl($imageUrl, 280)); goto YuS3Y; qXpCh: $row["\151\155\x61\147\x65\x5f\x75\x72\154"] = generateUploadFullUrl(generateThumbnailUrl($imageUrl, 300)); goto PvGpW; gN2GY: } goto kAnic; aDIB0: return $rows; goto bOFAx; bOFAx: } public function subjectsFeatured() { goto NVCBf; avqH6: LyfH_: goto ZzrZG; Ji7ER: foreach ($rows as &$row) { goto UZN_c; SiUBP: $row["\x63\x61\x74\x65\x67\x6f\162\171\137\156\x61\x6d\x65\x73"] = $categoryNames; goto HSWos; UZN_c: $imageUrl = $row["\x69\x6d\x61\147\x65\137\165\x72\154"]; goto fsQhT; SeL3G: $categoryNames = Db::table("\163\x75\x62\x6a\x65\143\x74\137\x63\141\x74\145\147\x6f\x72\171\x5f\162\x65\154\141\x74\x65")->alias("\123\103\122")->join("\x63\x61\164\145\147\157\x72\151\x65\163\40\x43", "\x53\x43\x52\x2e\143\x61\164\145\x67\x6f\162\x79\137\151\x64\75\x43\56\x69\144\x20\141\x6e\144\40\123\103\122\x2e\x73\x75\142\x6a\145\143\x74\x5f\151\144\75" . $row["\151\x64"])->column("\103\56\x6e\x61\155\x65"); goto SiUBP; HSWos: WstzL: goto QaBIO; CfI7a: $row["\x62\141\x6e\x6e\x65\x72\x5f\x69\x6d\147"] = generateUploadFullUrl(generateThumbnailUrl($imageUrl, 280)); goto YlUXH; fsQhT: $row["\151\x6d\141\147\145\x5f\x75\162\154"] = generateUploadFullUrl(generateThumbnailUrl($imageUrl, 300)); goto CfI7a; YlUXH: $row["\160\x61\x72\x74\x69\x63\151\160\141\156\x74\163"] = formatTimes($row["\x70\x61\x72\164\x69\x63\151\160\141\x6e\164\163"]); goto SeL3G; QaBIO: } goto avqH6; NVCBf: $rows = Db::query("\163\x65\x6c\x65\x63\164\x20\151\x64\54\x20\x6e\141\x6d\x65\54\x20\x73\x75\x62\164\151\164\x6c\145\x2c\x20\151\x6d\141\147\145\137\x75\x72\x6c\54\x20\142\x61\156\156\145\x72\137\151\x6d\x67\54\40\151\x74\x65\155\x73\54\x20\160\141\162\x74\x69\143\x69\x70\x61\x6e\164\x73\x5f\163\150\x6f\x77\x20\141\163\40\160\141\162\x74\151\x63\x69\160\141\x6e\164\x73\54\x20\x63\x75\x72\162\145\156\164\137\160\162\x69\143\x65\40\xd\12\11\11\x9\x9\11\11\11\x66\162\157\155\40\163\165\x62\152\x65\x63\x74\40\15\xa\11\11\x9\11\x9\x9\11\167\x68\145\162\x65\x20\106\111\116\104\137\111\116\x5f\123\105\x54\50\47\146\x65\141\164\x75\x72\145\x64\x27\54\x20\x6c\141\142\145\x6c\x29\40\x61\x6e\144\x20\x64\x65\x6c\x65\164\145\x5f\x66\154\x61\147\x3d\x30\x20\141\156\144\40\x73\x74\141\164\x75\163\x3d" . IndexDefs::ENTITY_PUBLISH_STATUS . "\40\141\156\x64\40\x75\156\x69\137\x61\x70\160\x3d\61\xd\xa\x9\11\11\x9\11\11\x9\x6f\162\144\145\162\x20\142\171\x20\x73\x6f\162\164\40\x61\163\x63"); goto Ji7ER; ZzrZG: return $rows; goto btWLu; btWLu: } public function subjectsInCategory($categoryId, $kw) { goto CG9bT; Tpqv8: return $rows; goto VXNky; YvzDP: if ($categoryId == -1) { goto C3QjU; } goto jPfhU; Hgion: goto MwBf_; goto Tikci; Zp3cB: $where["\123\56\156\141\x6d\145"] = ["\154\x69\x6b\145", "\45" . $kw . "\x25"]; goto mr4O2; CG9bT: $where = ["\x53\x2e\165\x6e\x69\137\141\160\160" => 1]; goto toEvf; Swxvz: OLW3X: goto Tpqv8; ZL3ne: MwBf_: goto jR6_T; qlQRp: if (!$kw) { goto T2_BG; } goto Zp3cB; gDCpo: C3QjU: goto S7ZeF; Tikci: b93DU: goto qlQRp; j0CtL: BwJgM: goto Hgion; NFIFY: $rows = Db::table("\163\165\142\x6a\145\x63\x74")->alias("\123")->where($where)->order("\x53\56\163\157\x72\x74\x20\x61\x73\x63")->field("\x53\56\151\144\x2c\x53\56\156\x61\x6d\x65\54\123\x2e\x73\x75\142\x74\x69\x74\x6c\145\54\x53\56\x69\x6d\x61\x67\145\x5f\x75\x72\x6c\x2c\x53\x2e\142\141\156\156\x65\x72\137\x69\x6d\147\54\123\56\x69\x74\x65\x6d\163\54\x53\56\x70\141\162\x74\x69\143\x69\160\141\156\164\163\137\163\150\x6f\167\40\x61\163\x20\x70\141\162\164\151\143\151\160\141\x6e\164\x73\x2c\123\x2e\143\165\x72\162\145\156\x74\137\160\x72\x69\x63\145")->select(); goto ZL3ne; dZu5M: goto BwJgM; goto gDCpo; S7ZeF: $where["\123\x2e\x63\x75\162\162\145\x6e\x74\137\x70\162\151\143\x65"] = 0; goto vMOi0; kvsr6: $where["\123\x2e\163\164\x61\164\165\163"] = ["\x69\156", [IndexDefs::ENTITY_PUBLISH_STATUS]]; goto bYBCU; bYBCU: if ($categoryId == 0) { goto b93DU; } goto YvzDP; vMOi0: $rows = Db::table("\x73\x75\142\x6a\x65\x63\x74")->alias("\123")->where($where)->order("\123\56\x73\x6f\162\x74\40\x61\x73\x63")->field("\x53\x2e\151\x64\54\123\56\x6e\x61\155\145\x2c\123\56\163\x75\x62\164\151\x74\154\145\54\x53\56\x69\155\141\147\x65\137\165\x72\x6c\54\x53\x2e\142\141\x6e\x6e\x65\162\137\151\x6d\147\x2c\123\x2e\x69\164\x65\155\163\54\x53\x2e\160\141\x72\164\x69\143\x69\x70\141\156\164\163\137\163\x68\x6f\x77\x20\x61\x73\x20\x70\x61\x72\164\x69\143\151\x70\141\x6e\x74\x73\x2c\123\56\143\x75\x72\x72\145\x6e\x74\x5f\160\x72\x69\143\145")->select(); goto j0CtL; jPfhU: $rows = Db::table("\x73\165\x62\152\145\143\x74")->alias("\123")->join("\163\x75\142\152\145\143\164\x5f\x63\141\x74\x65\147\157\162\x79\x5f\162\145\x6c\x61\164\x65\x20\x53\x43\122", "\123\56\151\x64\75\x53\103\122\56\x73\x75\142\x6a\x65\x63\x74\x5f\151\x64\x20\141\x6e\x64\x20\x53\103\122\56\x63\x61\x74\145\x67\x6f\162\x79\137\151\144\75" . $categoryId)->where($where)->order("\x53\56\x73\157\162\x74\40\141\x73\x63")->field("\123\56\x69\144\x2c\123\x2e\156\141\155\x65\54\x53\x2e\x73\x75\x62\x74\x69\164\x6c\x65\x2c\x53\x2e\151\155\x61\x67\145\x5f\x75\162\x6c\54\x53\x2e\142\141\156\x6e\145\162\x5f\151\155\x67\x2c\123\56\x69\x74\145\155\x73\54\x53\56\160\x61\162\x74\151\x63\151\x70\141\156\164\x73\137\163\x68\x6f\x77\40\x61\x73\x20\x70\x61\x72\x74\151\143\x69\160\141\x6e\164\x73\54\x53\56\143\165\162\162\x65\156\164\x5f\x70\x72\151\x63\x65")->select(); goto dZu5M; mr4O2: T2_BG: goto NFIFY; jR6_T: foreach ($rows as &$row) { goto GBlVS; Hkmh2: $categoryNames = Db::table("\x73\x75\x62\x6a\145\x63\164\x5f\143\141\164\145\147\157\x72\171\137\162\145\154\141\x74\x65")->alias("\123\x43\x52")->join("\x63\x61\164\x65\x67\x6f\x72\x69\x65\163\40\x43", "\123\x43\x52\x2e\143\x61\x74\145\x67\157\x72\171\137\x69\x64\x3d\103\56\151\x64\x20\x61\x6e\x64\x20\123\103\122\x2e\163\x75\x62\152\x65\x63\x74\x5f\x69\144\75" . $row["\151\x64"])->column("\103\56\156\x61\155\x65"); goto b00k5; GBlVS: $imageUrl = $row["\151\155\x61\x67\145\x5f\x75\x72\x6c"]; goto tTsi_; x08ls: $row["\x70\141\162\164\x69\143\151\160\x61\x6e\164\163"] = formatTimes($row["\160\x61\162\x74\151\143\x69\x70\141\156\x74\x73"]); goto Hkmh2; b00k5: $row["\x63\x61\x74\145\147\157\x72\x79\x5f\156\x61\x6d\x65\x73"] = $categoryNames; goto ahTgm; tTsi_: $row["\x69\155\141\147\145\x5f\x75\x72\x6c"] = generateUploadFullUrl(generateThumbnailUrl($imageUrl, 300)); goto JSIPm; JSIPm: $row["\142\x61\x6e\x6e\x65\x72\137\x69\155\x67"] = generateUploadFullUrl(generateThumbnailUrl($imageUrl, 280)); goto x08ls; ahTgm: OgifS: goto iozUE; iozUE: } goto Swxvz; toEvf: $where["\123\x2e\x64\x65\x6c\145\164\145\x5f\146\154\141\147"] = 0; goto kvsr6; VXNky: } public function getSubject($login_user_id, $id) { goto fixYq; CFPWJ: $record["\x73\165\x62\x6a\x65\143\164\137\164\x69\x70"] = htmlspecialchars_decode($record["\x73\x75\x62\x6a\145\x63\164\137\164\x69\x70"]); goto eMIp0; eMIp0: $record["\x74\145\x61\x6d\137\x62\162\151\145\x66"] = "\74\x70\76\344\270\x93\344\270\x9a\345\277\203\347\x90\x86\346\265\213\350\257\204\347\xa0\224\345\x8f\221\xe5\233\xa2\351\x98\x9f\xef\xbc\214\xe8\201\x9a\xe9\x9b\x86\xe5\233\275\345\x86\x85\xe4\xbc\x98\347\xa7\200\xe7\232\204\xe5\277\x83\xe7\x90\206\xe5\255\246\xe7\xa1\x95\345\xa3\xab\345\217\x8a\xe4\273\245\344\270\x8a\344\xba\xba\346\211\x8d\54\xe5\x85\250\351\235\242\346\xb6\265\xe7\x9b\226\345\xa9\x9a\345\xa7\273\346\x83\205\xe6\x84\x9f\343\x80\201\346\203\205\347\xbb\252\345\x8e\213\345\212\233\xe3\x80\x81\xe4\272\272\351\x99\x85\345\x85\263\347\xb3\273\xe3\x80\x81\344\xba\262\xe5\255\x90\346\225\x99\xe8\202\xb2\343\x80\x81\350\x81\214\xe4\xb8\232\xe5\217\x91\345\261\225\343\200\x81\344\270\252\344\272\xba\346\210\220\xe9\225\xbf\xe7\xad\211\345\xa4\x9a\xe9\xa2\206\345\237\x9f\xe7\232\x84\xe5\xbf\x83\xe7\x90\206\346\xb5\213\xe8\257\x84\347\xa0\224\345\217\x91\343\200\202\xe6\227\240\350\xae\xba\344\275\240\xe5\x86\x85\345\277\203\345\255\x98\345\234\xa8\xe4\273\x80\344\xb9\210\xe6\240\267\xe7\232\x84\345\233\260\xe6\x83\x91\357\xbc\x8c\xe9\200\x9a\xe8\277\207\xe6\xb5\x8b\xe8\257\204\351\203\275\xe5\217\xaf\xe4\xbb\245\346\211\xbe\345\210\260\xe7\xad\224\xe6\xa1\210\343\x80\x82\74\x2f\160\x3e\15\12\74\160\x3e\x3c\151\x6d\x67\40\x73\x72\x63\75\42\x53\111\124\105\137\x55\122\x4c\57\x73\x74\141\164\x69\x63\57\x69\x6d\147\x2f\142\x61\x6e\x6e\145\x72\x2e\152\x70\x67\x22\40\x73\x74\x79\x6c\145\x3d\42\155\141\x78\x2d\x77\151\144\x74\x68\72\x31\60\60\45\73\x22\x3e\x3c\x2f\x70\x3e"; goto AOZLd; GtQKt: $record["\x6f\x72\144\x65\x72\137\x6e\x6f"] = $lastOrder["\x6f\162\144\145\x72\137\x6e\157"]; goto vySAt; vh3kk: $lastOrder = Db::table("\x75\156\151\137\x61\x70\x70\137\x6f\162\144\145\162\163")->where(["\165\x73\145\162\137\151\x64" => $login_user_id, "\x73\165\x62\x6a\x65\143\164\137\x69\x64" => $id, "\146\x69\x6e\x69\x73\x68\145\144" => 0])->field("\157\162\144\145\x72\137\156\x6f")->find(); goto hn6GB; jDL0R: return $record; goto PvgM2; AOZLd: $record["\164\145\x61\155\137\142\162\151\145\146"] = str_replace("\x53\x49\x54\x45\137\125\122\x4c", SITE_URL, $record["\x74\145\x61\x6d\137\x62\x72\x69\x65\146"]); goto CMxBu; OG8_Z: if (!$login_user_id) { goto Ax878; } goto vh3kk; niXLt: s1iDb: goto jDL0R; ymu5u: $record["\x73\165\142\x6a\145\x63\x74\137\x64\x65\163\x63"] = preg_replace("\x2f\x3c\133\151\155\x67\174\111\115\x47\x5d\x2e\x2a\x3f\163\162\143\75\133\47\x7c\x5c\x22\135\50\x2e\52\x3f\x29\x5b\47\x7c\134\42\135\x2f", "\x3c\x69\x6d\147\40\163\162\x63\75\42" . SITE_URL . "\x24\x7b\x31\x7d\x22", $record["\163\x75\x62\152\x65\143\164\137\x64\x65\163\x63"]); goto ICMh1; FN0dQ: Ax878: goto CFPWJ; BV2sp: $record["\157\162\x64\x65\162\137\156\157"] = ''; goto OG8_Z; erGdx: $record["\151\155\x61\147\145\137\165\x72\154"] = generateUploadFullUrl(generateThumbnailUrl($imageUrl, 500)); goto tQc8K; ICMh1: $imageUrl = $record["\x69\x6d\141\147\145\x5f\165\162\154"]; goto erGdx; fixYq: $record = Db::table("\x73\x75\142\x6a\x65\143\x74")->where(["\151\x64" => $id])->field("\x69\144\x2c\15\12\x20\40\40\40\40\x20\40\x20\40\40\40\x20\156\141\x6d\145\54\15\12\40\40\40\x20\40\40\x20\x20\40\x20\x20\x20\163\165\142\x74\151\164\x6c\145\54\xd\12\x20\40\40\40\40\40\40\40\40\40\40\40\143\165\162\x72\x65\156\164\137\x70\162\151\x63\145\54\15\12\40\40\x20\x20\x20\x20\40\x20\40\40\x20\x20\x65\x78\x70\x65\143\x74\137\x66\x69\x6e\x69\x73\x68\137\164\151\x6d\145\54\xd\xa\x20\40\40\x20\x20\40\x20\40\40\40\40\40\x69\x74\145\x6d\163\x2c\15\xa\40\x20\40\40\x20\40\x20\x20\x20\x20\40\40\160\141\x72\164\151\143\151\160\141\x6e\x74\163\x5f\x73\x68\157\x77\x20\141\163\x20\160\141\x72\x74\151\x63\x69\x70\141\x6e\164\x73\x2c\xd\xa\x20\40\x20\x20\40\x20\40\x20\40\40\x20\x20\163\x75\x62\152\145\x63\x74\x5f\144\145\163\143\54\15\xa\40\x20\40\x20\x20\x20\40\40\40\40\x20\40\x73\165\142\x6a\145\143\164\137\x74\151\x70\x2c\xd\12\40\x20\x20\x20\x20\x20\40\40\40\x20\x20\x20\x69\155\141\x67\x65\x5f\x75\x72\154\x2c\15\xa\x20\40\x20\40\40\x20\x20\x20\x20\40\40\x20\x62\141\x6e\x6e\x65\x72\x5f\x69\x6d\147\54\xd\12\40\x20\x20\x20\x20\x20\x20\40\x20\40\x20\x20\164\x65\x73\x74\x5f\141\154\x6c\x6f\167\x5f\x62\x61\143\x6b\x2c\xd\12\40\40\x20\40\x20\40\40\x20\40\x20\40\x20\x74\145\163\x74\137\141\154\x6c\157\167\x5f\x61\156\163\167\145\162\137\x65\x6d\x70\164\x79\54\15\xa\40\40\x20\x20\40\x20\40\x20\40\40\x20\x20\x72\x65\160\157\162\x74\137\144\145\x6d\157\x5f\151\155\141\x67\145\x73")->find(); goto COalE; Nagc5: $record["\163\165\x62\x6a\x65\x63\x74\x5f\x64\x65\163\x63"] = htmlspecialchars_decode($record["\x73\x75\142\x6a\x65\x63\164\137\144\x65\x73\143"]); goto ymu5u; COalE: if ($record) { goto UVkd9; } goto E9xsi; hn6GB: if (!$lastOrder) { goto blKXM; } goto GtQKt; im6uz: $record["\x72\x65\x70\x6f\x72\164\x5f\144\145\155\157\x5f\151\x6d\141\x67\x65\163"] = $record["\162\x65\x70\x6f\x72\x74\x5f\x64\145\x6d\x6f\137\x69\155\141\x67\145\x73"] ? explode("\x2c", $record["\162\x65\160\x6f\x72\164\x5f\x64\145\155\x6f\137\x69\x6d\141\x67\145\163"]) : []; goto V8L4b; V8L4b: foreach ($record["\x72\145\x70\x6f\162\164\137\x64\145\x6d\157\137\151\x6d\x61\x67\145\x73"] as $index => $image) { $record["\x72\x65\x70\x6f\162\164\137\x64\x65\x6d\x6f\x5f\x69\x6d\141\x67\145\163"][$index] = generateUploadFullUrl($image); reWjR: } goto niXLt; tQc8K: $record["\x62\x61\x6e\x6e\x65\x72\137\151\x6d\x67"] = generateUploadFullUrl(generateThumbnailUrl($imageUrl, 500)); goto cyAv1; cyAv1: $record["\x70\141\162\x74\x69\x63\151\x70\x61\x6e\164\x73"] = formatTimes($record["\160\x61\x72\x74\x69\x63\151\x70\x61\156\164\163"]); goto BV2sp; CMxBu: $record["\164\x65\141\x6d\137\x62\x72\151\x65\146"] = nl2br($record["\x74\x65\141\155\x5f\142\x72\151\145\x66"]); goto im6uz; vySAt: blKXM: goto FN0dQ; E9xsi: wexception("\346\x97\xa0\346\263\x95\xe6\x89\276\xe5\210\xb0\xe8\xaf\xa5\346\xb5\213\350\257\x84"); goto J0PLX; J0PLX: UVkd9: goto Nagc5; PvgM2: } protected function getOrderByNo($order_no) { goto XaAHu; KM1i3: Zp3pX: goto len_V; QHXq1: goto VPwSt; goto KM1i3; W9kUy: cecPa: goto AMbRz; XaAHu: if (!empty($order_no)) { goto cecPa; } goto sECsv; sECsv: return []; goto W9kUy; sSopV: if ($result && isset($result["\x72\x65\160\157\162\x74\x4c\x69\163\164"])) { goto Zp3pX; } goto HZjsC; len_V: $row["\162\145\160\157\x72\x74\x5f\x6c\151\163\164"] = $result["\x72\x65\x70\x6f\x72\x74\x4c\x69\163\x74"]; goto LEXEB; rMEqO: $row["\162\145\160\x6f\x72\164\137\x6c\151\x73\x74"] = []; goto QHXq1; ogMGO: $result = json_decode($row["\x72\x65\x73\165\154\x74"], true); goto sSopV; LEXEB: VPwSt: goto X0W55; iNw24: if (!($row && !empty($row["\162\x65\163\x75\x6c\x74"]))) { goto kAPpH; } goto ogMGO; AMbRz: $row = Db::table("\165\x6e\151\x5f\x61\x70\x70\x5f\x6f\x72\x64\145\162\163")->where(["\x6f\162\x64\x65\162\x5f\x6e\x6f" => $order_no])->field("\x2a")->find(); goto iNw24; X0W55: kAPpH: goto AGq7C; AGq7C: return $row; goto Oq6gC; HZjsC: Log::error("\146\x61\151\154\145\144\40\164\x6f\40\144\145\x63\157\x64\145\40\x72\145\163\165\x6c\164\x20\x66\x6f\x72\x20\x73\x75\x62\152\x65\143\164\40\x6f\x72\x64\145\x72\72\x20{$order_no}"); goto rMEqO; Oq6gC: } public function createOrder($login_user_id, $id, $order_no) { goto guAHd; j5YVe: goto zAhIm; goto Wj63b; UYCwi: wexception("\346\225\260\346\x8d\xae\345\xba\223\351\224\231\350\xaf\257"); goto IWvb2; Wj63b: NJUxh: goto itGLl; nubZW: zAhIm: goto V3etk; qsrE5: $res = Db::table("\165\x6e\151\137\x61\160\x70\137\157\162\x64\x65\162\x73")->insert($order); goto g3elm; IWvb2: g9NSG: goto j5YVe; v1nVI: pobiO: goto WmNm6; UPGTu: if (!empty($row)) { goto Ypg4t; } goto Lz9YC; tbgXe: if (!($subject["\151\x74\x65\155\x73"] == 0)) { goto pobiO; } goto tYgu7; eAVwE: Ypg4t: goto AS2it; WNAex: if (!empty($subject)) { goto BBNRR; } goto fpZ7Q; Lz9YC: wexception("\346\x97\240\xe6\xb3\x95\346\x89\xbe\345\x88\xb0\350\257\245\350\256\xa2\xe5\x8d\225"); goto eAVwE; V3etk: return $order["\x6f\162\144\145\162\137\156\157"]; goto islYr; fpZ7Q: wexception("\346\x97\xa0\346\263\225\346\x89\xbe\345\x88\xb0\350\257\xa5\xe6\265\x8b\350\257\x84\351\x87\217\350\xa1\xa8"); goto OqFln; guAHd: $subject = Db::table("\x73\x75\x62\152\145\143\164")->where(["\151\x64" => $id])->field("\x2a")->find(); goto WNAex; kfHYH: $order = ["\x6f\162\144\x65\x72\137\156\x6f" => "\x55\x4e\x49" . date("\171\x6d\144\110\x69\x73") . $login_user_id, "\x75\x73\145\162\x5f\x69\x64" => $login_user_id, "\163\165\142\152\145\143\164\x5f\151\144" => $id, "\157\x72\144\x65\x72\x5f\141\x6d\x6f\165\x6e\x74" => $subject["\x63\165\x72\x72\145\156\x74\137\x70\162\x69\x63\x65"], "\157\x72\x64\145\162\137\164\x69\x6d\145" => date("\x59\x2d\x6d\x2d\x64\x20\110\x3a\151\72\163"), "\164\x6f\x74\x61\x6c\137\151\x74\x65\x6d\163" => $subject["\x69\x74\145\155\x73"], "\x70\141\171\137\x73\164\x61\164\x75\163" => $subject["\x63\x75\162\162\145\156\164\137\160\162\x69\x63\x65"] > 0 ? Defs::PAY_WAIT : Defs::PAY_SUCCESS, "\x69\164\145\155\x5f\166\x65\162\163\151\x6f\x6e" => $subject["\x69\x74\145\x6d\x5f\x76\x65\x72\x73\x69\157\156"]]; goto qsrE5; WmNm6: if ($order_no) { goto NJUxh; } goto kfHYH; tYgu7: wexception("\xe6\265\213\350\257\x84\xe9\x87\x8f\xe8\xa1\xa8\345\x8c\205\xe5\x90\xab\347\x9a\204\351\xa2\230\xe7\233\xae\xe4\xb8\272\347\251\xba"); goto v1nVI; itGLl: $row = $this->getOrderByNo($order_no); goto UPGTu; g3elm: if (!empty($res)) { goto g9NSG; } goto UYCwi; AS2it: $order = ["\157\162\144\145\162\x5f\156\157" => $row["\x6f\x72\144\145\162\x5f\x6e\x6f"], "\x75\x73\x65\x72\137\x69\144" => $row["\165\163\145\x72\x5f\151\x64"], "\x73\165\x62\152\145\143\164\x5f\x69\144" => $row["\x73\x75\x62\152\x65\143\x74\x5f\x69\x64"], "\157\x72\x64\145\162\x5f\x61\x6d\157\165\156\164" => $row["\157\x72\144\x65\x72\x5f\141\x6d\x6f\165\x6e\164"], "\157\162\144\145\x72\x5f\164\151\155\145" => $row["\x6f\162\144\x65\x72\x5f\x74\151\155\145"], "\x74\157\164\141\x6c\137\x69\164\145\155\x73" => $row["\x74\157\x74\x61\154\137\151\164\145\x6d\163"], "\x70\x61\x79\137\163\x74\x61\x74\165\163" => $row["\160\x61\171\x5f\163\164\141\x74\165\x73"]]; goto nubZW; OqFln: BBNRR: goto tbgXe; islYr: } public function regenOrder($order_no) { goto juQZI; ZBB9d: Db::table("\165\x6e\151\137\141\160\160\137\157\162\144\145\x72\163")->where("\x6f\x72\x64\x65\162\137\156\x6f", $order_no)->update($order); goto Hjmau; LX6ib: if (!empty($subject)) { goto lWsCD; } goto IrBgK; k80wr: $order["\143\x75\162\162\x5f\x69\164\x65\155"] = 0; goto CE5y6; gqfol: wexception("\346\xb5\213\xe8\xaf\204\xe8\256\xa2\345\x8d\225\xe4\270\x8d\345\xad\x98\345\234\xa8\xef\274\232" . $order_no); goto Xvppr; pDuQe: $order = []; goto ESR1E; E8Dek: $order["\x66\151\156\x69\163\150\x65\144"] = 0; goto T3P6N; IrBgK: wexception("\xe6\xb5\x8b\xe8\xaf\204\xe4\270\215\345\xad\230\345\x9c\xa8"); goto xPBXv; xPBXv: lWsCD: goto pDuQe; KuheY: $order["\162\145\x73\165\154\164"] = null; goto E8Dek; jWImm: if (!empty($order)) { goto SRgGv; } goto gqfol; Rb7R0: $subject = Db::table("\x73\x75\x62\x6a\145\x63\x74")->where(["\151\144" => $order["\x73\165\x62\152\145\143\x74\137\151\x64"]])->field("\52")->find(); goto LX6ib; Xvppr: SRgGv: goto Rb7R0; ESR1E: $order["\164\157\x74\141\154\x5f\x69\164\x65\155\x73"] = $subject["\151\164\x65\x6d\x73"]; goto V26gg; T3P6N: $order["\151\x74\x65\155\x5f\x76\x65\162\163\151\157\x6e"] = $subject["\151\164\145\155\x5f\x76\x65\x72\x73\151\x6f\156"]; goto ZBB9d; V26gg: $order["\164\145\x73\x74\x5f\x69\x74\145\x6d\x73"] = 0; goto k80wr; juQZI: $order = $this->getOrderByNo($order_no); goto jWImm; CE5y6: $order["\151\x74\145\155\x73"] = ''; goto KuheY; Hjmau: } public function makeTestSubjectItems($items, $subjectItems) { goto QCz5y; i5KXM: vVGwT: goto PyFam; g5pYD: UHvWC: goto i5KXM; x4pNn: $index = 0; goto IA1lW; yVb3s: foreach ($subjectItems as $subjectItemId => &$subjectItem) { goto CkWp1; kHIjb: toU3i: goto fl6y6; CkWp1: if (!(isset($subjectItemsExist[$subjectItemId]) && $subjectItem["\x74\x79\x70\x65"] == $subjectItemsExist[$subjectItemId]["\164\171\x70\145"])) { goto toU3i; } goto RFyR2; fl6y6: b08eK: goto qeJY6; RFyR2: $subjectItem["\166\141\x6c\x75\x65"] = $subjectItemsExist[$subjectItemId]["\x76\x61\x6c\x75\145"]; goto kHIjb; qeJY6: } goto g5pYD; mo6Qs: $subjectItemsClone = []; goto x4pNn; IA1lW: foreach ($subjectItems as $key => $item) { goto TiGkj; TiGkj: if (!($index > 0)) { goto rc_tE; } goto jnqHV; VtZ3D: Ul8i2: goto ThODc; jnqHV: $item["\160\162\x65\x76\x5f\151\144"] = "\x69\144\x5f" . $item["\160\162\145\166\137\151\x64"]; goto vovsI; vovsI: rc_tE: goto map9N; ThODc: $subjectItemsClone["\151\x64\137" . $key] = $item; goto bXW_1; kClJf: $item["\156\x65\x78\164\x5f\151\144"] = "\x69\x64\137" . $item["\156\145\x78\164\x5f\151\144"]; goto VtZ3D; ztu4v: uiWIn: goto uhPMe; map9N: if (!($index < count($subjectItems) - 1)) { goto Ul8i2; } goto kClJf; bXW_1: $index++; goto ztu4v; uhPMe: } goto LHZaZ; kquqC: foreach ($itemExists as $itemExist) { goto jXAEt; ILrF3: if (!(count($itemSections) != 3)) { goto TxBGS; } goto bw2TO; bw2TO: goto GSP8b; goto iqe1c; Hejxa: $itemIdExist = $itemSections[0]; goto huQI6; huQI6: $itemTypeExist = $itemSections[1]; goto ZpXMs; ezNaf: $subjectItemsExist[$itemIdExist] = ["\x74\x79\x70\x65" => $itemTypeExist, "\166\141\154\165\x65" => $itemTypeExist == Defs::QUESTION_CHECKBOX ? explode("\55", $itemValueExist) : $itemValueExist]; goto ujgRO; ZpXMs: $itemValueExist = $itemSections[2]; goto ezNaf; jXAEt: $itemSections = explode("\x26", $itemExist); goto ILrF3; ujgRO: GSP8b: goto M1RK3; iqe1c: TxBGS: goto Hejxa; M1RK3: } goto HoEDS; QCz5y: if (!$items) { goto vVGwT; } goto i_dDM; LHZaZ: NArRy: goto g_huR; B7230: $itemExists = explode("\x2c", $items); goto kquqC; Vtwu1: LumEI: goto mo6Qs; i_dDM: $subjectItemsExist = []; goto B7230; HoEDS: pCFFd: goto yVb3s; PyFam: foreach ($subjectItems as $subjectItemId => &$subjectItem) { goto eiYkt; dEsax: YbCpw: goto wZEYW; gryrF: $optionIndex++; goto Cp0i3; bonUy: $subjectItem["\151\x6d\x61\147\x65"] = generateUploadFullUrl(generateThumbnailUrl($subjectItem["\x69\155\x61\x67\145"], 200)); goto dEsax; Dmtea: tpu0L: goto Y2wCI; eiYkt: if (!$subjectItem["\x69\155\x61\147\145"]) { goto YbCpw; } goto bonUy; UlDhW: if (!$subjectItem[$imageField]) { goto NZfKl; } goto jifrp; Cp0i3: goto F0Cab; goto Dmtea; Y2wCI: sEmtD: goto y2p3H; wZEYW: $optionIndex = 1; goto WvC1h; jifrp: $subjectItem[$imageField] = generateUploadFullUrl(generateThumbnailUrl($subjectItem[$imageField], 100)); goto a3WLg; WvC1h: F0Cab: goto i2z5H; a3WLg: NZfKl: goto gryrF; srLPZ: $imageField = "\151\x6d\x61\x67\x65\x5f" . $optionIndex; goto UlDhW; i2z5H: if (!($optionIndex <= 12)) { goto tpu0L; } goto srLPZ; y2p3H: } goto Vtwu1; g_huR: return $subjectItemsClone; goto VAyQ7; VAyQ7: } public function answer($order_no, $item_id, $item_type, $item_option) { try { goto X1mKv; RLflv: ZPa3c: goto we_2Y; jfd8v: if (!empty($item)) { goto hkS74; } goto B7lDN; Vfgip: LyDG3: goto ESido; h5XGM: exception("\xe8\257\245\xe6\xb5\x8b\350\257\x84\350\xae\xa2\xe5\215\x95\xe5\205\xb3\xe8\x81\x94\xe9\207\x8f\xe8\241\250\xe4\xb8\242\345\xa4\261\357\xbc\x9a" . $order_no); goto ci7PC; WzIFu: heb5q: goto D0y9f; pWyDV: $item = $subjectItems[$item_id]; goto jfd8v; Er_nU: $result = SubjectLogic::I()->generateTestResult($order["\163\165\x62\152\145\x63\x74\x5f\x69\x64"], Subjects::I()->parseOrderItems($update["\151\x74\x65\155\x73"])); goto vf231; ci7PC: ffTxQ: goto bchko; FmTE6: goto Pk8CW; goto WzIFu; D0y9f: $update["\164\x65\x73\164\137\x69\164\x65\155\x73"] = 1; goto hxIlg; q1tHg: array_walk($result, function ($item) use(&$update) { goto hR7PP; hR7PP: if (isset($item["\167\141\x72\156\151\x6e\147\x5f\x6c\x65\x76\x65\x6c"])) { goto AVJYI; } goto CT_3d; CT_3d: return; goto a_dbp; O6ZCr: $update["\x77\x61\x72\156\x69\x6e\x67\x5f\x6c\145\x76\x65\x6c"] = $item["\x77\x61\x72\x6e\x69\x6e\147\x5f\x6c\x65\166\145\154"]; goto D0asq; shoX1: if (!($item["\167\x61\x72\156\151\156\x67\137\154\145\166\145\x6c"] > $update["\x77\141\x72\x6e\x69\x6e\x67\137\x6c\x65\x76\145\x6c"])) { goto bp3eZ; } goto O6ZCr; D0asq: bp3eZ: goto oFGHx; a_dbp: AVJYI: goto shoX1; oFGHx: }); goto gRxw9; we_2Y: $answer[$item_id] = $item_id . "\46" . $item_type . "\x26" . $item_option; goto DmzFt; vjU5I: exception("\351\207\217\350\241\250\351\242\230\xe7\x9b\xae\xe4\xb8\215\xe5\xad\x98\xe5\x9c\250"); goto SvTxc; FZ8Qa: Ejxj2: goto E6LDu; sZBsv: $item_option = htmlspecialchars_decode($item_option); goto h55Us; vf231: $update["\x77\x61\x72\156\151\x6e\x67\137\x6c\x65\x76\x65\x6c"] = Defs::MEASURE_WARNING_UNKOWN_LEVEL; goto q1tHg; NUyQg: $item_option = str_replace("\x2c", "\x3b", $item_option); goto HyHBt; VTXYd: if (!is_string($item_option)) { goto FbsVM; } goto sZBsv; DBDXy: $item_option = []; goto SHW1u; XImgS: $update["\x66\151\156\x69\163\x68\145\144"] = 1; goto cFMz9; ktbMS: goto ZPa3c; goto FZ8Qa; lI0LX: $update = []; goto q8meo; X8IOC: if (!empty($subject)) { goto ffTxQ; } goto h5XGM; o_EDZ: if ($order["\164\145\163\164\137\151\x74\x65\155\163"] == "\60") { goto heb5q; } goto X0PB0; cFMz9: $update["\146\151\156\151\163\150\x5f\164\x69\x6d\145"] = date("\x59\55\x6d\55\144\x20\x48\72\x69\x3a\163"); goto Er_nU; gejJ0: $item_option = htmlspecialchars($item_option); goto RLflv; Hmmej: hkS74: goto lI0LX; BHskp: exception("\xe6\265\x8b\xe8\xaf\x84\351\241\xb9\xe7\233\xae\347\x89\x88\346\x9c\254\345\217\221\347\x94\237\344\272\206\345\x8f\230\346\x9b\xb4\xef\xbc\x8c\351\x9c\x80\xe8\246\201\351\x87\215\xe6\x96\260\xe6\xb5\x8b\xe8\xaf\204", -1); goto k1Hb4; SvTxc: vLWEX: goto pWyDV; muJD1: if (!empty($subjectItems)) { goto Hu1Hx; } goto K8YhL; QYT7x: sUjVN: goto g2EED; g2EED: $update["\x74\x65\x73\164\137\151\x74\x65\155\x73"] = count($answer) + 1; goto FmTE6; Z9XYe: $answer = []; goto o_EDZ; ESido: $subject = Subjects::I()->getSubjectById($order["\x73\x75\142\x6a\145\143\164\137\151\x64"]); goto X8IOC; iyeTB: $order = array_merge($order, $update); goto MH1vx; RtzBp: Db::table("\x75\156\x69\x5f\x61\160\160\x5f\157\x72\x64\x65\162\x73")->where(["\157\162\x64\x65\x72\x5f\156\157" => $order_no])->update($update); goto iyeTB; sI2ay: if (isset($subjectItems[$item_id])) { goto vLWEX; } goto vjU5I; cELyj: if (!$order["\x66\151\156\151\x73\150\145\x64"]) { goto LyDG3; } goto mWd7s; m9Hs2: FbsVM: goto B5na_; F6_0e: Hu1Hx: goto sI2ay; HyHBt: $item_option = str_replace("\x26", "\40", $item_option); goto gejJ0; Rjq0L: if (!($item_type == Defs::QUESTION_CHECKBOX)) { goto jCArH; } goto q9of1; N1WAY: $subjectItems = Subjects::I()->getSubjectItems($order["\163\x75\x62\x6a\145\x63\x74\137\x69\x64"]); goto muJD1; X1mKv: $order = $this->getOrderByNo($order_no); goto EZdG6; DmzFt: $update["\151\x74\x65\x6d\x73"] = join("\x2c", $answer); goto sKAzQ; B5na_: $item_option = join("\55", $item_option); goto ntTzT; K8YhL: exception("\351\207\217\350\xa1\xa8\351\xa1\xb9\347\233\xae\xe4\270\215\345\255\x98\xe5\234\xa8"); goto F6_0e; X0PB0: $itemExists = explode("\x2c", $order["\151\164\145\x6d\163"]); goto TDwBX; E6LDu: $item_option = htmlspecialchars_decode($item_option); goto NUyQg; EZdG6: if (!empty($order)) { goto bFd86; } goto Db4dX; nCZzt: bFd86: goto cELyj; E61rl: iLD5t: goto RtzBp; gRxw9: $update["\162\x65\163\165\x6c\164"] = json_encode(["\162\145\160\157\162\164\x4c\151\163\164" => $result], JSON_UNESCAPED_UNICODE); goto E61rl; SHW1u: vamRH: goto VTXYd; sKAzQ: if (!empty($item["\x6e\145\170\164\137\151\x64"])) { goto iLD5t; } goto XImgS; ntTzT: jCArH: goto ktbMS; GiRbD: if ($item_type == Defs::QUESTION_TEXT) { goto Ejxj2; } goto Rjq0L; B7lDN: exception("\xe8\257\204\xe6\xb5\x8b\xe9\242\x98\xe7\x9b\xae\xe4\xb8\215\xe5\255\230\xe5\234\xa8\357\xbc\232" . $item_id); goto Hmmej; bchko: if (!($order["\x69\164\145\155\x5f\166\x65\x72\163\151\157\x6e"] != $subject["\151\x74\x65\155\137\166\145\162\163\x69\157\156"])) { goto YivWN; } goto BHskp; mWd7s: exception("\346\265\213\xe8\xaf\x84\xe5\xb7\262\xe5\256\214\xe6\x88\220"); goto Vfgip; Db4dX: exception("\xe6\227\240\346\xb3\225\346\x89\xbe\345\x88\260\350\xaf\xa5\xe6\xb5\213\xe8\257\204\350\xae\242\345\x8d\225"); goto nCZzt; q8meo: $update["\143\165\x72\x72\x5f\x69\x74\x65\155"] = $item_id; goto Z9XYe; q9of1: if (!empty($item_option)) { goto vamRH; } goto DBDXy; h55Us: $item_option = json_decode($item_option, true); goto m9Hs2; k1Hb4: YivWN: goto N1WAY; hxIlg: Pk8CW: goto GiRbD; TDwBX: foreach ($itemExists as $itemExist) { goto M1TTI; AKZ3k: vqu44: goto Yw4KU; cbyqT: Nu3lV: goto rPl2b; aat0v: if (!($itemIdExist == $item_id)) { goto vqu44; } goto om_VV; Yw4KU: $answer[$itemIdExist] = $itemExist; goto cbyqT; om_VV: goto sUjVN; goto AKZ3k; M1TTI: $itemIdExist = explode("\x26", $itemExist)[0]; goto aat0v; rPl2b: } goto QYT7x; MH1vx: } catch (\Exception $e) { goto MZrza; n4ksQ: K0NrY: goto wY8gf; C0ek3: if (!($exceptionCode == -1)) { goto K0NrY; } goto wEqew; wEqew: wexception("\xe6\xb5\x8b\350\257\204\xe9\xa1\xb9\xe7\x9b\xae\347\211\210\346\234\254\345\x8f\x98\xe6\233\xb4", -1); goto n4ksQ; MZrza: $exceptionCode = $e->getCode(); goto C0ek3; wY8gf: wexception($e->getMessage()); goto W0uYz; W0uYz: } return ["\146\151\156\151\x73\x68\x65\144" => $order["\146\x69\x6e\x69\163\150\x65\x64"]]; } }
