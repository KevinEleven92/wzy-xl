<?php
 namespace app\cli\logic; use think\Log; use think\Db; use think\Cache; use app\mp\service\Subjects; use app\Index\logic\License as LicenseLogic; class Orders { public function __construct() { } public function generateReportPdfs() { goto rsgkq; lDAS1: yGpRr: goto nLH9T; jqp0v: rzErt: goto ppgCM; b8Z18: foreach ($orders as $order) { goto anXTh; anXTh: $orderNo = $order["\157\162\x64\x65\x72\137\156\157"]; goto e9hlE; aK0tS: $pdfUrl = "\x68\x74\x74\160\72\57\x2f\x77\x77\x77\55\x74\x6c\x2e\x73\x6f\x6c\141\x72\161\164\56\143\157\x6d\x3a\x38\x30\x38\61\x2f\x3f\146\x69\x6c\x65\x3d" . urlencode($pdfFileName); goto xnEL7; xnEL7: $pdfContent = file_get_contents($pdfUrl); goto rm7Rn; PhiJK: if (!empty($pdfFileName)) { goto JGBY5; } goto BRB38; xp0sc: $url = $siteUrl . $url; goto zd80d; rm7Rn: $saveName = $orderNo . "\56\160\144\146"; goto Et9ax; zmpZF: goto V_4dm; goto gZgfP; w9qd8: $successCount++; goto IygXR; F1ZKa: $siteUrl = Cache::get("\x53\111\124\105\137\125\x52\x4c"); goto Pfy8Z; jOL7I: $failCount++; goto beYu7; e9hlE: $orderInfo = Subjects::I()->getOrderByNo($orderNo); goto QLpbo; Et9ax: $saveFullname = EXPORT_DIR . DS . "\x72\x65\x70\x6f\x72\164\137\160\144\x66" . DS . $saveName; goto N9lzv; jf8xz: Log::error("\x66\141\x69\154\145\144\40\164\x6f\x20\146\151\x6e\144\40\x53\111\x54\x45\137\x55\x52\x4c\40\151\x6e\40\x63\141\x63\150\x65"); goto I208e; Pfy8Z: if (!empty($siteUrl)) { goto h4hRD; } goto jf8xz; IygXR: V_4dm: goto yctNy; I208e: $failCount++; goto zmpZF; hCjT3: $pdfFileName = file_get_contents($apiUrl); goto PhiJK; E9koi: $url = url("\155\x70\57\x53\x75\x62\152\x65\143\164\x2f\162\145\160\x6f\162\x74", array_merge(generateMpAutoLoginParams($orderInfo["\x63\165\x73\164\x6f\155\x65\x72\137\x69\x64"]), ["\x6f\x72\144\145\162\x5f\x6e\x6f" => $orderNo, "\151\x6e\x74\x65\162\x6e\x61\x6c\x56\151\145\x77" => 1, "\x70\x64\146\x56\151\x65\167" => 1])); goto F1ZKa; QLpbo: if (!empty($orderInfo)) { goto N0XAh; } goto jOL7I; zd80d: $apiUrl = "\x68\x74\164\160\x3a\x2f\x2f\x77\x77\167\x2d\164\x6c\x2e\163\x6f\x6c\141\x72\x71\x74\x2e\143\157\x6d\72\70\60\x38\61\x2f\77\x75\x72\154\x3d" . urlencode($url); goto hCjT3; eOUOs: JGBY5: goto aK0tS; gZgfP: h4hRD: goto xp0sc; BRB38: $failCount++; goto P2hlc; w7biH: N0XAh: goto E9koi; N9lzv: file_put_contents($saveFullname, $pdfContent); goto nCnrj; P2hlc: goto V_4dm; goto eOUOs; nCnrj: Db::table("\x73\165\142\152\145\143\164\x5f\x6f\162\x64\x65\x72")->where("\x69\x64", $order["\151\x64"])->update(["\x72\145\160\157\162\x74\x5f\160\144\146" => $saveName]); goto w9qd8; beYu7: goto V_4dm; goto w7biH; yctNy: } goto CSuJA; mfIm6: goto rzErt; goto jbM61; rsgkq: if (LicenseLogic::I()->checkVip()) { goto V2yPg; } goto tg5WQ; sfrbN: $failCount = 0; goto lDAS1; R7MpG: V2yPg: goto zNMkq; ppgCM: return "\346\x88\x90\345\x8a\x9f\x3a{$successCount}\x2c\x20\xe5\244\xb1\350\264\245{$failCount}"; goto YDZiv; Uo1Yk: UgALl: goto b8Z18; CSuJA: hfs30: goto mfIm6; zNMkq: $successCount = 0; goto sfrbN; tg5WQ: return "\xe5\275\x93\xe5\x89\x8d\xe4\270\215\xe6\x98\xaf\346\x9c\x89\xe6\225\x88\347\232\204\344\xbc\x9a\345\x91\x98\350\xb5\x84\346\240\274\357\274\214\350\257\245\xe5\x8a\x9f\xe8\203\275\347\246\201\xe7\224\xa8"; goto R7MpG; VWsTR: goto rzErt; goto Uo1Yk; nLH9T: $orders = Db::table("\x73\165\142\x6a\145\143\164\x5f\157\162\x64\x65\162")->where(["\x66\x69\x6e\151\163\x68\145\144" => 1, "\162\x65\160\157\x72\164\137\160\144\146" => null])->page(1, 100)->order("\x69\144\40\144\x65\163\143")->field("\x69\x64\x2c\x20\x6f\162\144\145\x72\x5f\156\x6f")->select(); goto vmQhy; vmQhy: if (!empty($orders)) { goto UgALl; } goto VWsTR; jbM61: if (true) { goto yGpRr; } goto jqp0v; YDZiv: } }
