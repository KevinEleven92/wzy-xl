<?php
 namespace app\index\model; use think\Model; use think\Cache; use think\Log; class Setting extends Model { protected $tableName = "\x73\145\x74\164\x69\x6e\147"; protected $pk = "\x6b\x65\171"; protected static $_settingMemoryCache = array(); public function setMemorySetting($field, $value) { goto vNzrB; zT71I: RPJC2: goto zRO81; zRO81: self::$_settingMemoryCache[$field]["\166\141\x6c\165\145"] = $value; goto qeShG; JBOoX: $this->getSetting(); goto zT71I; vNzrB: if (!empty(self::$_settingMemoryCache)) { goto RPJC2; } goto JBOoX; qeShG: } public function getSetting($field = null) { goto fb1BC; D1HrT: yHH2S: goto CoOpg; t1L9B: return $items[$field]["\166\x61\154\165\x65"]; goto D1HrT; bUQY2: if ($field) { goto kn2GA; } goto JJvJm; fb1BC: if (!($field && isset(self::$_settingMemoryCache[$field]))) { goto nzI55; } goto cWdjE; Tjqdd: lmzJy: goto t1L9B; BZR1F: $data = $this->where($where)->column("\153\145\171\54\166\x61\x6c\165\145"); goto nkq4H; j2Gv0: t63nF: goto O2ZJd; cWdjE: return self::$_settingMemoryCache[$field]["\x76\141\x6c\165\x65"]; goto BMkNI; YXx0D: kn2GA: goto BqsGH; pfbCv: self::$_settingMemoryCache = $items; goto R77Ry; L25xx: p0nlY: goto Y7kjx; c3c36: if (!empty($items)) { goto p0nlY; } goto MQW7I; DEVGh: goto yHH2S; goto Tjqdd; mpVwc: return $items[$field]["\x76\x61\x6c\165\145"]; goto kl2Gn; tSIJS: return $items; goto zI3Rw; BqsGH: if (array_key_exists($field, $items)) { goto lmzJy; } goto QUKbb; Y7kjx: $fields = array_keys($items); goto Tt3i5; RaOVI: if (!$items) { goto t63nF; } goto pfbCv; Ntz49: self::$_settingMemoryCache = $items; goto bUQY2; OMBX2: if (isset($items[$field])) { goto bb8fL; } goto ctHAZ; QUKbb: return null; goto DEVGh; nkq4H: foreach ($items as $key => &$arr) { goto vTe2E; vTe2E: switch ($key) { case "\114\x4f\x47\x49\x4e\x5f\117\x4e\x4c\131\137\x4f\116\105": case "\x73\165\142\x6a\x65\x63\164\x5f\163\x68\157\x77\x5f\x70\162\x69\143\x65": case "\x73\145\156\x64\137\141\160\160\x6f\151\x6e\x74\x5f\x6f\x72\144\145\x72\x5f\164\157\x5f\145\170\160\x65\x72\x74": case "\x73\x65\x6e\144\x5f\x61\x70\160\x6f\151\156\164\x5f\157\x72\144\145\x72\137\x74\x6f\x5f\143\x75\163\x74\157\x6d\x65\162": goto Egs7Y; Eo9LC: $data[$key] = $data[$key] ? "\x79\145\163" : "\156\x6f"; goto fjuI9; Egs7Y: if (!isset($data[$key])) { goto Q7e0w; } goto Eo9LC; HRYxe: goto zZy50; goto bG_T3; fjuI9: Q7e0w: goto HRYxe; bG_T3: } goto cCeVV; Z1sIS: $arr["\x76\x61\154\x75\145"] = array_key_exists($key, $data) ? $data[$key] : $arr["\144\x65\x66\141\x75\x6c\x74"]; goto QuJ3_; cCeVV: VXzY4: goto wEcBU; wEcBU: zZy50: goto Z1sIS; QuJ3_: $arr["\x6b\x65\171"] = $key; goto wbEAE; wbEAE: sFtCt: goto QqW4f; QqW4f: } goto r3vhu; zI3Rw: goto WDrHR; goto Lv5Ow; uursQ: Cache::set("\163\x79\163\x74\145\155\137\x73\x65\164\164\151\156\x67", $items); goto Ntz49; BMkNI: nzI55: goto k91EM; ctHAZ: return null; goto atcvC; Lv5Ow: qvKlB: goto OMBX2; Tt3i5: $where = "\x60\x6b\145\x79\x60\40\x69\156\50\x27" . implode("\47\x2c\x27", $fields) . "\47\51"; goto BZR1F; vnfca: goto uA9C7; goto YXx0D; MQW7I: return null; goto L25xx; R77Ry: if ($field) { goto qvKlB; } goto tSIJS; atcvC: bb8fL: goto mpVwc; JJvJm: return $items; goto vnfca; kl2Gn: WDrHR: goto j2Gv0; O2ZJd: $items = dict('', "\163\x65\x74\x74\151\156\147"); goto c3c36; k91EM: $items = Cache::get("\x73\x79\x73\164\x65\155\x5f\x73\145\x74\164\151\156\x67"); goto RaOVI; CoOpg: uA9C7: goto S4dpW; r3vhu: ABhY_: goto uursQ; S4dpW: } public function saveSetting($datas = array()) { goto YN8ai; k8oBG: if (!empty($fields)) { goto G0GhL; } goto mkaGG; phz5P: $this->clearCache(); goto N3jdY; OJE3B: G0GhL: goto UujKA; RPcRy: $fields = dict('', "\x73\145\164\164\x69\156\x67"); goto k8oBG; ZhOTD: $result = false; goto Qb4wM; AjB1W: return true; goto JNumf; Qb4wM: foreach ($datas as $data) { goto tdCbi; mR4b0: sjqBJ: goto BjdI5; BjdI5: $state = $this->where(array("\x6b\145\171" => $data["\153\x65\171"]))->update($data); goto eMaXJ; sz6_i: IWTtN: goto dPwbp; NJcx9: HCnKp: goto sz6_i; Kopth: jipnb: goto UJwgf; WBfuL: $result = true; goto NJcx9; tdCbi: switch ($data["\153\145\x79"]) { case "\114\117\x47\111\116\x5f\117\x4e\114\x59\137\117\x4e\105": case "\163\165\x62\x6a\x65\x63\x74\137\x73\150\157\x77\x5f\160\162\151\143\145": case "\x73\x65\156\x64\137\x61\x70\160\157\x69\x6e\x74\137\157\162\x64\x65\162\x5f\164\x6f\137\145\x78\x70\145\162\164": case "\x73\x65\x6e\144\137\x61\160\160\x6f\x69\156\164\137\157\162\144\x65\x72\137\164\x6f\x5f\x63\165\163\164\x6f\x6d\x65\x72": $data["\x76\141\x6c\x75\x65"] = $data["\x76\x61\x6c\x75\x65"] == "\171\x65\x73" ? 1 : 0; } goto aUGNB; ow2JL: $state = $this->isUpdate(false)->data($data)->save(); goto kpZlN; eMaXJ: jDHNG: goto ft_vJ; kpZlN: goto jDHNG; goto mR4b0; aUGNB: MtFxw: goto Kopth; UJwgf: if (in_array($data["\x6b\145\x79"], $allowedKeys)) { goto sjqBJ; } goto ow2JL; ft_vJ: if (!$state) { goto HCnKp; } goto WBfuL; dPwbp: } goto Gr_wR; YN8ai: if ($datas) { goto vHCRy; } goto AjB1W; mkaGG: return false; goto OJE3B; JNumf: vHCRy: goto RPcRy; woR4W: $where = "\140\153\145\171\140\x20\151\x6e\50\47" . implode("\x27\x2c\x27", $settingField) . "\47\x29"; goto fN7Y4; UujKA: $settingField = array_keys($fields); goto rjBBH; N3jdY: return $result; goto BM1lg; Gr_wR: Mu_SM: goto phz5P; rjBBH: $this->where("\x60\153\145\171\x60\40\156\157\164\x20\x69\x6e\50\47" . implode("\x27\x2c\47", $settingField) . "\x27\51")->delete(); goto woR4W; fN7Y4: $allowedKeys = $this->where($where)->column("\153\145\x79"); goto ZhOTD; BM1lg: } public function clearCache() { Cache::rm("\x73\171\163\164\145\x6d\x5f\163\145\x74\164\x69\156\x67"); } }
