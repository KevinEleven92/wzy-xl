<?php
 namespace app\index\service; use think\Log; use think\Db; use think\Debug; class EventLogs { const eSeverityError = 1; const eSeverityWarning = 2; const eSeverityInfo = 3; public static $eSeverityDefs = array(self::eSeverityError => "\xe9\x94\231\350\257\xaf", self::eSeverityWarning => "\xe5\221\x8a\xe8\255\246", self::eSeverityInfo => "\xe6\217\x90\xe7\244\xba"); public static $eSeverityHtmlDefs = array(self::eSeverityError => "\74\x73\160\x61\156\40\143\x6c\141\x73\163\x3d\x22\x62\141\x64\x67\x65\40\x62\141\x64\147\145\55\144\141\x6e\x67\145\162\x22\x3e\xe9\224\231\xe8\257\257\x3c\x2f\163\160\141\156\76", self::eSeverityWarning => "\74\x73\x70\x61\156\40\x63\x6c\x61\163\x73\x3d\x22\x62\x61\x64\x67\145\40\x62\x61\144\x67\145\x2d\x77\141\x72\x6e\151\x6e\147\x22\76\345\x91\x8a\350\xad\246\x3c\x2f\163\160\141\x6e\76", self::eSeverityInfo => "\74\163\160\x61\x6e\40\143\x6c\141\163\x73\x3d\42\x62\141\x64\x67\x65\x20\142\x61\144\x67\145\55\151\x6e\146\157\42\76\346\x8f\x90\xe7\244\xba\x3c\x2f\x73\160\x61\x6e\76"); protected function __construct() { } public static function I() { goto wSSJE; COngt: if ($instance) { goto i2s5W; } goto i2lSi; jeLxm: return $instance; goto AIQoY; tsTDz: i2s5W: goto jeLxm; i2lSi: $instance = new self(); goto tsTDz; wSSJE: static $instance = null; goto COngt; AIQoY: } public function logEvent($entry, $severity = self::eSeverityInfo) { $result = Db::table("\145\166\145\x6e\x74\x5f\154\157\147\163")->insert(["\145\156\x74\x65\x72\x65\144" => date("\x59\55\155\55\x64\40\110\72\x69\x3a\x73"), "\x65\156\x74\x72\x79" => $entry, "\163\145\166\145\x72\151\x74\x79" => $severity, "\165\163\145\x72\137\x69\144" => RequestContext::I()->loginUserId ?? 0]); return $result == 1 ? true : false; } }
