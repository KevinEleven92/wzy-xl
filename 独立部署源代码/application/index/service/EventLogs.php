<?php
 namespace app\index\service; use think\Log; use think\Db; use think\Debug; class EventLogs { const eSeverityError = 1; const eSeverityWarning = 2; const eSeverityInfo = 3; public static $eSeverityDefs = array(self::eSeverityError => "\xe9\x94\x99\xe8\xaf\257", self::eSeverityWarning => "\345\221\212\350\xad\xa6", self::eSeverityInfo => "\346\217\220\347\xa4\xba"); public static $eSeverityHtmlDefs = array(self::eSeverityError => "\x3c\163\160\141\x6e\x20\x63\x6c\141\x73\163\x3d\42\142\x61\144\147\145\40\142\x61\x64\x67\145\x2d\x64\x61\156\x67\145\x72\42\x3e\351\224\x99\xe8\xaf\xaf\74\x2f\x73\160\141\x6e\76", self::eSeverityWarning => "\x3c\x73\x70\x61\x6e\x20\143\154\x61\x73\x73\75\42\x62\141\144\147\x65\x20\142\141\144\x67\145\x2d\167\141\x72\156\151\x6e\x67\x22\76\xe5\x91\212\xe8\xad\246\74\57\163\160\141\156\76", self::eSeverityInfo => "\74\x73\160\141\x6e\40\143\154\x61\163\163\75\42\x62\141\x64\x67\x65\40\x62\x61\x64\x67\145\55\151\x6e\146\157\42\76\xe6\217\x90\347\xa4\272\x3c\57\163\x70\x61\x6e\76"); protected function __construct() { } public static function I() { goto IbL1c; aBWQb: $instance = new self(); goto cLLIy; CLDAf: return $instance; goto qIiYd; UQLYH: if ($instance) { goto sKCqs; } goto aBWQb; IbL1c: static $instance = null; goto UQLYH; cLLIy: sKCqs: goto CLDAf; qIiYd: } public function logEvent($entry, $severity = self::eSeverityInfo) { $result = Db::table("\145\166\x65\156\164\137\154\x6f\147\x73")->insert(["\x65\156\164\145\x72\x65\144" => date("\x59\55\x6d\55\144\x20\x48\x3a\151\x3a\163"), "\x65\156\x74\162\171" => $entry, "\163\x65\x76\x65\162\151\164\171" => $severity, "\x75\x73\145\x72\137\151\144" => RequestContext::I()->loginUserId ?? 0]); return $result == 1 ? true : false; } }
