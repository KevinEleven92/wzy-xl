<?php
 namespace app\index\service; use think\Log; use think\Db; use think\Debug; class EventLogs { const eSeverityError = 1; const eSeverityWarning = 2; const eSeverityInfo = 3; public static $eSeverityDefs = array(self::eSeverityError => "\xe9\224\x99\350\xaf\xaf", self::eSeverityWarning => "\345\221\212\350\xad\xa6", self::eSeverityInfo => "\346\217\220\xe7\xa4\272"); public static $eSeverityHtmlDefs = array(self::eSeverityError => "\74\163\160\141\x6e\40\143\154\x61\x73\x73\x3d\42\142\141\144\x67\x65\40\x62\x61\x64\147\x65\x2d\144\x61\x6e\x67\x65\162\x22\76\351\x94\231\xe8\257\xaf\x3c\57\x73\160\141\156\x3e", self::eSeverityWarning => "\74\x73\160\141\x6e\40\143\154\x61\163\163\x3d\42\142\x61\144\x67\x65\x20\x62\x61\x64\147\145\x2d\x77\141\162\156\x69\x6e\147\42\76\345\221\x8a\xe8\xad\246\x3c\57\x73\160\x61\x6e\76", self::eSeverityInfo => "\x3c\163\160\x61\x6e\x20\143\154\x61\x73\163\x3d\42\142\141\x64\x67\x65\x20\x62\141\144\x67\145\55\x69\156\146\157\x22\76\xe6\x8f\220\xe7\xa4\xba\74\x2f\x73\160\141\156\76"); protected function __construct() { } public static function I() { goto JHCPG; iu98q: S_adF: goto Or5zq; Hv_4V: $instance = new self(); goto iu98q; Or5zq: return $instance; goto aB318; JHCPG: static $instance = null; goto CfeF6; CfeF6: if ($instance) { goto S_adF; } goto Hv_4V; aB318: } public function logEvent($entry, $severity = self::eSeverityInfo) { $result = Db::table("\x65\166\145\x6e\x74\137\154\157\147\163")->insert(["\x65\x6e\164\145\x72\145\144" => date("\131\x2d\155\55\x64\x20\110\x3a\151\x3a\163"), "\x65\x6e\x74\x72\171" => $entry, "\163\145\166\145\162\151\x74\171" => $severity, "\165\x73\145\162\x5f\151\x64" => RequestContext::I()->loginUserId ?? 0]); return $result == 1 ? true : false; } }
