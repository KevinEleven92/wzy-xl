<?php
 namespace app\index\logic; use app\index\model\Setting; use think\Debug; use think\Db; use think\Log; use think\Request; use think\Session; use app\common\service\Storage as StorageService; use app\index\service\Wzyer as WzyerService; class License extends Base { const KEY = "\x79\x73\x73\x47\x37\x38\110\x48\x44\x7a\x76\x37\x55\155\x38\x56\153\107\x54\105"; public function fetch() { goto qDSzu; qDSzu: $data = ["\x69\x64" => null, "\145\155\141\x69\154" => null, "\141\x75\x74\x68\137\x6b\x65\x79" => null, "\142\x69\x6e\144\x5f\x74\151\155\145" => null, "\x76\x69\160\137\144\x75\145\137\x64\x61\164\145" => null]; goto cLiLF; cLiLF: try { goto EHANJ; ZHCX8: VhfpH: goto v0RC5; sTvdy: $data = array_merge($data, json_decode(xorEnde(base64_decode(StorageService::getInstance()->WZYER_AUTH), self::KEY), true)); goto ZHCX8; EHANJ: if (!StorageService::getInstance()->WZYER_AUTH) { goto VhfpH; } goto sTvdy; v0RC5: } catch (\Exception $e) { StorageService::getInstance()->WZYER_AUTH = null; } goto Mj4Ex; Mj4Ex: return $data; goto pwu4N; pwu4N: } public function getBuyUrl() { $licenseData = $this->fetch(); return "\x68\164\x74\x70\x73\x3a\x2f\x2f\167\167\x77\56\167\x7a\171\x65\162\56\x63\x6f\x6d\x2f\151\156\x64\x65\x78\57\x4f\160\x65\x6e\x5f\x41\x70\x69\x2f\164\x6f\126\151\x70\56\x68\x74\x6d\x6c\77\x65\155\141\151\154\x3d" . $licenseData["\145\155\x61\x69\154"]; } public function bind($authKey) { goto ygiFC; ygiFC: $result = WzyerService::I()->bindAuthKey($authKey); goto b8MkJ; b8MkJ: $data = ["\x69\144" => $result["\x69\144"], "\145\x6d\141\151\154" => $result["\x65\155\141\x69\x6c"], "\x61\x75\x74\x68\x5f\153\x65\x79" => $result["\141\165\164\150\x5f\153\x65\171"], "\x62\151\156\x64\x5f\164\151\x6d\x65" => date("\x59\55\x6d\x2d\144\x20\x48\x3a\151\72\x73"), "\x76\x69\x70\x5f\x64\x75\x65\137\144\141\x74\145" => $result["\166\151\160\137\x64\x75\x65\137\144\x61\x74\x65"]]; goto fIMDU; fIMDU: StorageService::getInstance()->WZYER_AUTH = base64_encode(xorEnde(json_encode($data), self::KEY)); goto ojJ37; ojJ37: } public function unbind() { WzyerService::I()->unbindAuthKey(); StorageService::getInstance()->WZYER_AUTH = null; } public function refresh() { goto LT6Pg; fg8IQ: return; goto OoZbv; X4sMC: $result = WzyerService::I()->refreshAuthKey(); goto JqUuV; OoZbv: xScWP: goto X4sMC; LT6Pg: $dataOld = $this->fetch(); goto t8tov; JqUuV: $data = ["\151\144" => $result["\x69\x64"], "\x65\155\x61\151\154" => $result["\x65\155\x61\151\x6c"], "\x61\x75\x74\150\137\153\145\171" => $result["\x61\165\164\x68\137\153\145\171"], "\142\151\x6e\x64\137\x74\151\x6d\145" => $dataOld["\142\151\156\144\137\164\x69\x6d\145"] ?: date("\131\55\x6d\55\144\40\110\x3a\x69\x3a\163"), "\x76\151\x70\137\144\165\x65\x5f\144\141\164\145" => $result["\x76\151\x70\x5f\144\165\x65\x5f\x64\141\x74\x65"]]; goto USo7m; USo7m: StorageService::getInstance()->WZYER_AUTH = base64_encode(xorEnde(json_encode($data), self::KEY)); goto sXGfr; t8tov: if (!empty($dataOld["\x69\x64"])) { goto xScWP; } goto fg8IQ; sXGfr: } public function checkVip() { goto WuT7c; lygwJ: $today = date("\131\55\155\55\x64"); goto Xyou3; eTQpi: return true; goto roDSi; Xyou3: if (!($today > $data["\x76\x69\160\x5f\x64\165\x65\137\x64\x61\164\x65"])) { goto hAiHM; } goto wg8qk; d9kZv: if (!empty($data["\x69\x64"])) { goto PD2Iq; } goto SDK57; wg8qk: return false; goto Qf_oc; b6gm4: return false; goto K2dUP; Qf_oc: hAiHM: goto eTQpi; K2dUP: Kdm6T: goto lygwJ; WuT7c: $data = $this->fetch(); goto d9kZv; NQciO: PD2Iq: goto ZOhkq; ZOhkq: if (!empty($data["\x76\151\x70\137\144\165\x65\137\x64\141\164\x65"])) { goto Kdm6T; } goto b6gm4; SDK57: return false; goto NQciO; roDSi: } }
