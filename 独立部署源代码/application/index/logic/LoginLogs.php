<?php
 namespace app\index\logic; use app\index\model\Setting; use think\Debug; use think\Db; use think\Log; use think\Request; use think\Session; use app\Defs; class LoginLogs extends Base { protected function __construct() { parent::__construct(); } public function load($search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = "\151\x64", $order = "\144\145\163\x63") { goto o8t1D; y10zr: $records = Db::table("\154\157\147\x69\x6e\137\x6c\x6f\147\x73")->where($conditions)->order($order)->limit($limit)->field(true)->select(); goto X2kr8; znowb: b6qTR: goto PdEGM; k6OIa: M5lcS: goto hOJbG; X2kr8: return ["\x74\x6f\164\x61\x6c" => $totalCount, "\162\x6f\x77\163" => $records]; goto DZK8b; m3UeX: ZmU5h: goto UVPeF; BY4_3: goto ZmU5h; goto dniba; pyB5z: $conditions["\x75\x73\145\162\x6e\141\155\x65"] = ["\154\x69\153\145", "\x25" . $search["\165\x73\x65\x72\156\141\155\145"] . "\x25"]; goto luXcB; ePNp9: if (emptyInArray($search, "\x75\163\x65\162\x6e\141\155\145")) { goto NtBYl; } goto pyB5z; e7Nuj: $order = "\151\x64\40\x64\145\163\143"; goto BY4_3; PdEGM: $conditions = []; goto ePNp9; o8t1D: $limit = ($page - 1) * $rows . "\x2c" . $rows; goto JzBcd; hOJbG: $order = "\x69\144\x20" . $order; goto znowb; aYH2Z: $order = "\x74\151\x6d\x65\40" . $order; goto m3UeX; dniba: aIN1c: goto aYH2Z; luXcB: NtBYl: goto f2RNQ; f2RNQ: $totalCount = Db::table("\x6c\157\x67\151\156\137\154\157\147\163")->where($conditions)->count(); goto y10zr; UVPeF: goto b6qTR; goto k6OIa; JzBcd: if ($sort == "\151\x64") { goto M5lcS; } goto rmb8Y; rmb8Y: if ($sort == "\164\151\x6d\145") { goto aIN1c; } goto e7Nuj; DZK8b: } public function add($username, $userid, $useragent, $ip) { Db::table("\x6c\157\147\x69\x6e\x5f\x6c\157\x67\x73")->insert(["\x75\x73\145\162\156\141\155\x65" => $username, "\165\163\x65\162\151\144" => $userid, "\x75\x73\x65\x72\x61\147\x65\156\x74" => substr($useragent, 0, 100), "\144\145\166\151\x63\x65" => Request::instance()->isMobile() ? Defs::DEVICE_MOBILE : Defs::DEVICE_DESKTOP, "\x69\x70" => $ip, "\x74\151\155\x65" => Db::raw("\156\157\167\x28\x29")]); } }
