<?php
 namespace app\index\logic; use app\index\model\Setting; use think\Debug; use think\Db; use think\Log; use think\Request; use think\Session; use app\Defs; class LoginLogs extends Base { protected function __construct() { parent::__construct(); } public function load($search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = "\x69\144", $order = "\144\145\163\143") { goto ZyT_s; Q0jwc: $conditions = []; goto mVWHu; JlMr7: $order = "\151\144\x20\x64\x65\163\x63"; goto sleUR; sleUR: goto gLXhY; goto VwOvv; C03x2: $records = Db::table("\x6c\157\147\151\x6e\137\x6c\157\147\x73")->where($conditions)->order($order)->limit($limit)->field(true)->select(); goto giAQa; tadhd: goto GDhbB; goto KtmTs; v9yx0: gLXhY: goto tadhd; VwOvv: jSc3i: goto iNOJE; p0y56: if ($sort == "\x74\151\x6d\x65") { goto jSc3i; } goto JlMr7; flGlU: $conditions["\x75\163\x65\x72\x6e\x61\155\145"] = ["\154\x69\x6b\145", "\x25" . $search["\x75\163\x65\x72\x6e\x61\155\145"] . "\x25"]; goto jCUoK; YlLjM: GDhbB: goto Q0jwc; jCUoK: xxfa6: goto SzVG0; giAQa: return ["\164\157\164\141\x6c" => $totalCount, "\x72\x6f\167\163" => $records]; goto y8q7i; ZyT_s: $limit = ($page - 1) * $rows . "\54" . $rows; goto uoaCh; O1g4K: $order = "\151\144\40" . $order; goto YlLjM; iNOJE: $order = "\x74\151\x6d\x65\40" . $order; goto v9yx0; mVWHu: if (emptyInArray($search, "\165\x73\x65\x72\x6e\141\155\145")) { goto xxfa6; } goto flGlU; SzVG0: $totalCount = Db::table("\x6c\157\x67\x69\156\x5f\x6c\157\x67\163")->where($conditions)->count(); goto C03x2; uoaCh: if ($sort == "\151\x64") { goto P4aNW; } goto p0y56; KtmTs: P4aNW: goto O1g4K; y8q7i: } public function add($username, $userid, $useragent, $ip) { Db::table("\x6c\x6f\147\x69\x6e\137\x6c\x6f\147\163")->insert(["\165\163\145\162\156\141\155\145" => $username, "\x75\x73\x65\x72\151\144" => $userid, "\165\x73\145\162\x61\147\145\156\x74" => substr($useragent, 0, 100), "\x64\145\x76\151\x63\145" => Request::instance()->isMobile() ? Defs::DEVICE_MOBILE : Defs::DEVICE_DESKTOP, "\x69\160" => $ip, "\164\x69\x6d\x65" => Db::raw("\156\x6f\167\x28\51")]); } }
