<?php
 namespace app\index\logic; use app\index\model\Setting; use think\Debug; use think\Db; use think\Log; use think\Request; use think\Session; use app\Defs; class LoginLogs extends Base { protected function __construct() { parent::__construct(); } public function load($search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = "\x69\144", $order = "\x64\145\x73\143") { goto ZNJrU; MZUYB: hlTjV: goto MF6cF; iaNnJ: BFfjG: goto srmEH; WxAFV: pt_l6: goto w74Ks; ECqrO: if ($sort == "\x69\144") { goto HYoRu; } goto Z4uts; MF6cF: $totalCount = Db::table("\154\157\x67\x69\x6e\x5f\154\157\147\x73")->where($conditions)->count(); goto NF4Yz; lAYBu: if (emptyInArray($search, "\165\163\145\162\156\x61\x6d\145")) { goto hlTjV; } goto G4FJR; srmEH: goto bR9mt; goto RBXSc; CloA3: $order = "\151\144\x20\144\x65\x73\x63"; goto m6glJ; ZvNBd: $order = "\x69\x64\x20" . $order; goto JpgmE; m6glJ: goto BFfjG; goto WxAFV; NF4Yz: $records = Db::table("\x6c\157\147\x69\156\137\154\157\x67\163")->where($conditions)->order($order)->limit($limit)->field(true)->select(); goto KvE23; JpgmE: bR9mt: goto mF12p; ZNJrU: $limit = ($page - 1) * $rows . "\54" . $rows; goto ECqrO; KvE23: return ["\x74\x6f\x74\141\154" => $totalCount, "\162\x6f\167\163" => $records]; goto sBrvg; RBXSc: HYoRu: goto ZvNBd; G4FJR: $conditions["\165\x73\145\162\156\141\155\x65"] = ["\x6c\x69\153\x65", "\45" . $search["\x75\163\145\162\156\x61\155\x65"] . "\45"]; goto MZUYB; mF12p: $conditions = []; goto lAYBu; w74Ks: $order = "\x74\x69\x6d\145\40" . $order; goto iaNnJ; Z4uts: if ($sort == "\x74\151\x6d\145") { goto pt_l6; } goto CloA3; sBrvg: } public function add($username, $userid, $useragent, $ip) { Db::table("\x6c\157\x67\x69\156\x5f\x6c\x6f\147\163")->insert(["\x75\x73\145\162\156\141\155\145" => $username, "\x75\163\145\x72\x69\144" => $userid, "\165\163\x65\x72\141\147\145\x6e\x74" => substr($useragent, 0, 100), "\144\x65\166\151\x63\145" => Request::instance()->isMobile() ? Defs::DEVICE_MOBILE : Defs::DEVICE_DESKTOP, "\x69\x70" => $ip, "\x74\151\x6d\x65" => Db::raw("\156\157\167\50\51")]); } }
