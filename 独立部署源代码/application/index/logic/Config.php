<?php
 namespace app\index\logic; use app\index\model\Setting; use think\Debug; use think\Db; use think\Log; use think\Request; use think\Session; use app\index\logic\Defs; class Config extends Base { protected function __construct() { parent::__construct(); } public function loadFieldItems() { goto FNNYp; FNNYp: $conditions = []; goto haO65; h0rbe: $records = Db::table("\x65\170\160\145\162\x74\x5f\146\x69\x65\154\144\137\x69\164\145\155")->alias("\x49")->join("\145\x78\x70\x65\x72\x74\137\x66\151\145\154\144\40\106", "\x49\56\x66\151\x65\x6c\144\x5f\151\x64\75\x46\56\x69\144")->where($conditions)->order("\x49\56\146\x69\x65\x6c\144\137\x69\x64\40\141\163\x63")->field("\x49\56\x69\x64\54\x49\56\x66\x69\x65\154\x64\x5f\151\164\145\x6d\54\106\x2e\x66\151\x65\x6c\144\54\106\56\151\x64\x20\x61\x73\x20\x66\151\x65\154\144\137\151\x64\x2c\143\157\156\143\141\164\50\x46\x2e\x69\x64\x2c\x20\47\x40\x27\54\40\106\x2e\x66\x69\x65\x6c\x64\51\x20\141\163\40\147\x72\x6f\165\x70\x5f\x66\x69\145\154\144")->select(); goto HbFwA; Ufn6t: gEEs4: goto qZwTM; haO65: $totalCount = Db::table("\x65\170\160\145\x72\164\x5f\x66\151\x65\x6c\144\x5f\151\164\x65\x6d")->where($conditions)->count(); goto h0rbe; HbFwA: $recordsEx = Db::table("\x65\170\160\145\162\x74\137\x66\x69\145\154\144")->where(["\x69\144" => ["\x6e\x6f\164\x20\x69\x6e", function ($query) { $query->table("\145\x78\x70\x65\x72\x74\x5f\146\x69\145\154\144\137\x69\x74\145\155")->field("\146\151\145\154\x64\137\x69\144"); }]])->field("\151\x64\x20\141\x73\40\146\151\x65\154\x64\137\151\144\x2c\40\x66\151\145\154\x64\54\x20\x63\x6f\156\x63\x61\x74\x28\151\x64\x2c\x20\47\x40\x27\x2c\40\x66\x69\x65\x6c\144\51\x20\141\x73\40\147\162\157\165\160\137\146\151\145\154\144")->select(); goto M3o_T; qZwTM: return array_merge($records, $recordsEx); goto FfIm1; M3o_T: foreach ($recordsEx as &$recordEx) { goto ehTsQ; ehTsQ: $recordEx["\151\x64"] = 0; goto gGyNg; gGyNg: $recordEx["\x66\151\145\154\144\137\151\x74\x65\155"] = ''; goto WNL2E; WNL2E: K_0sy: goto IjSVa; IjSVa: } goto Ufn6t; FfIm1: } public function getFieldItemInfos($id) { $infos = Db::table("\x65\x78\160\145\x72\x74\x5f\x66\x69\x65\154\144\x5f\x69\164\x65\155")->where("\x69\144", $id)->field(true)->find(); return $infos; } public function saveFieldItem($id = 0, $infos) { goto WfMTH; eSq1X: O4QGt: goto eM1L2; HmT0q: Db::table("\145\x78\160\145\x72\164\137\146\151\145\154\144\x5f\x69\164\145\x6d")->insert($infos); goto Qs5se; WfMTH: if ($id) { goto YknNu; } goto HmT0q; sZpkL: Db::table("\x65\170\x70\x65\162\164\x5f\x66\x69\x65\154\x64\137\x69\164\145\155")->where("\x69\x64", $id)->update($infos); goto eSq1X; Qs5se: goto O4QGt; goto vckU9; vckU9: YknNu: goto sZpkL; eM1L2: return true; goto GUTqI; GUTqI: } public function deleteFieldItem($id) { goto W_982; W_982: Db::table("\145\170\160\145\x72\164\137\x66\x69\145\154\144\137\151\x74\x65\155")->where("\x69\x64", $id)->delete(); goto QE6ed; QE6ed: Db::table("\145\170\160\145\x72\164\137\146\x69\145\x6c\x64\x5f\162\145\154\141\164\x65")->where("\146\151\x65\154\x64\137\151\164\145\x6d\137\x69\x64", $id)->delete(); goto KWfGK; KWfGK: return true; goto uHLMG; uHLMG: } public function getFieldInfos($id) { $infos = Db::table("\x65\x78\x70\145\162\164\137\146\151\x65\x6c\144")->where("\x69\x64", $id)->field(true)->find(); return $infos; } public function saveField($id = 0, $infos) { goto H2KPM; fpkqq: Db::table("\x65\x78\160\145\162\164\x5f\146\151\x65\154\144")->where("\x69\x64", $id)->update($infos); goto Q_eYV; Do1t9: return true; goto jk1ya; lBAOn: p5E7N: goto fpkqq; DgoJ9: goto lMkwt; goto lBAOn; Q_eYV: lMkwt: goto Do1t9; H2KPM: if ($id) { goto p5E7N; } goto F9C8R; F9C8R: Db::table("\145\170\x70\x65\x72\x74\x5f\x66\151\145\x6c\x64")->insert($infos); goto DgoJ9; jk1ya: } public function deleteField($id) { goto ElFZW; rU6Pv: Db::table("\x65\170\160\x65\162\164\137\x66\151\145\x6c\144\x5f\162\145\x6c\x61\164\145")->where("\146\151\x65\154\x64\x5f\151\x64", $id)->delete(); goto cC_AR; CsT8u: Db::table("\145\170\160\x65\162\x74\x5f\x66\x69\145\x6c\x64\x5f\x69\164\x65\x6d")->where("\x66\x69\145\x6c\x64\x5f\151\144", $id)->delete(); goto rU6Pv; cC_AR: return true; goto K09yT; ElFZW: Db::table("\145\170\x70\x65\x72\164\137\146\x69\x65\154\144")->where("\x69\144", $id)->delete(); goto CsT8u; K09yT: } public function loadCategories() { goto w5Q0R; hnKKh: g5hj2: goto SMiff; Zff4n: foreach ($records as &$record) { $record["\x69\x6d\147\x5f\x75\x72\x6c"] = generateThumbnailUrl($record["\x69\155\147\x5f\165\162\x6c"], 100); kEVeg: } goto hnKKh; SMiff: return $records; goto JeGvM; w5Q0R: $records = Db::table("\x63\141\164\x65\x67\x6f\162\151\145\163")->field("\52")->order("\x73\x6f\x72\x74\40\x61\x73\x63")->select(); goto Zff4n; JeGvM: } public function getCategoryInfos($id) { $infos = Db::table("\x63\x61\164\x65\147\157\162\151\x65\163")->where("\x69\x64", $id)->field("\52")->find(); return $infos; } public function saveCategory($id, $infos) { goto p52ie; la623: Db::table("\143\x61\164\x65\x67\x6f\x72\151\x65\x73")->where("\x69\144", $id)->update($infos); goto XzB5w; pKoEv: EIaMX: goto la623; rP5FX: return true; goto mkvxv; iTupz: goto zmf1C; goto pKoEv; YR3Nj: Db::table("\143\141\x74\145\x67\x6f\x72\x69\x65\163")->insert($infos); goto iTupz; XzB5w: zmf1C: goto rP5FX; p52ie: if ($id) { goto EIaMX; } goto YR3Nj; mkvxv: } public function deleteCategory($id) { goto YZ7md; lst9t: Db::table("\163\165\x62\152\145\x63\164\137\143\x61\164\145\x67\x6f\162\x79\137\x72\145\154\141\164\145")->where("\x63\x61\164\145\x67\x6f\162\x79\137\151\144", $id)->delete(); goto sUFxP; d7xN5: Db::table("\x65\170\160\145\x72\164\137\x63\141\x74\145\x67\157\162\x79\x5f\162\x65\154\141\164\145")->where("\x63\141\164\x65\x67\x6f\x72\x79\137\151\x64", $id)->delete(); goto lst9t; YZ7md: Db::table("\x63\x61\164\x65\x67\x6f\x72\151\x65\x73")->where("\x69\144", $id)->delete(); goto d7xN5; sUFxP: return true; goto w4ZEy; w4ZEy: } public function loadTargets() { $records = Db::table("\x65\170\160\145\x72\164\x5f\x74\x61\162\147\145\164")->field("\151\144\x2c\x74\141\x72\x67\x65\x74")->order("\151\x64\x20\x61\x73\143")->select(); return $records; } public function getTargetInfos($id) { $infos = Db::table("\145\170\x70\x65\162\164\137\164\x61\x72\x67\145\x74")->where("\151\x64", $id)->field("\x69\x64\54\164\141\162\147\145\164")->find(); return $infos; } public function saveTarget($id, $infos) { goto t1Xst; LncjH: EOsGk: goto EnZDJ; EnZDJ: return true; goto XqKsE; tRLyg: Db::table("\145\x78\x70\145\x72\x74\x5f\164\x61\x72\x67\145\x74")->insert($infos); goto mhb6u; fwh1J: Db::table("\145\x78\160\145\162\x74\x5f\164\141\162\147\x65\x74")->where("\151\x64", $id)->update($infos); goto LncjH; PI31u: IJxob: goto fwh1J; t1Xst: if ($id) { goto IJxob; } goto tRLyg; mhb6u: goto EOsGk; goto PI31u; XqKsE: } public function deleteTarget($id) { goto MxNET; v3qla: return true; goto C6bUo; MxNET: Db::table("\x65\170\160\145\x72\164\137\x74\x61\x72\147\x65\164")->where("\151\144", $id)->delete(); goto s4SQp; s4SQp: Db::table("\x65\x78\x70\x65\162\x74\x5f\164\x61\162\147\x65\x74\137\162\145\x6c\x61\164\x65")->where("\x74\141\162\x67\x65\x74\137\151\x64", $id)->delete(); goto v3qla; C6bUo: } }
