<?php
 namespace app\index\logic; use app\index\model\Setting; use think\Debug; use think\Db; use think\Log; use think\Request; use think\Session; use app\index\logic\Defs as IndexDefs; use app\index\service\EventLogs; use app\Defs; use app\index\model\Customer as CustomerModel; use app\index\service\RequestContext; class Customer extends Base { protected function __construct() { parent::__construct(); } public function load($search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = '', $order = '') { goto ot1rh; aAKg8: $order = $sort . "\40" . $order; goto t2FFb; MrDic: $totalCount = Db::table("\x63\x75\163\x74\157\x6d\x65\162")->where($conditions)->count(); goto yUzpa; ki66Y: iAj_k: goto te4n0; FUJHz: $conditions = []; goto freP_; oR6_I: RXB9z: goto ukPIj; N28zG: goto iuenJ; goto LlqfH; yUzpa: $records = Db::table("\x63\x75\x73\164\x6f\155\x65\x72")->where($conditions)->page($page, $rows)->order($order)->field(true)->select(); goto AWbm0; t2FFb: iuenJ: goto FUJHz; hB4W2: if (emptyInArray($search, "\162\x65\141\x6c\137\156\x61\x6d\145")) { goto tJUlF; } goto rifQm; rifQm: $conditions["\162\x65\x61\154\x5f\x6e\x61\x6d\x65"] = ["\x6c\151\x6b\x65", "\45" . $search["\x72\145\141\154\137\156\141\155\145"] . "\45"]; goto rtR9W; q9zdU: $conditions["\x63\145\154\154\x70\150\x6f\156\x65"] = ["\x6c\x69\153\x65", "\45" . $search["\x63\145\154\x6c\160\x68\x6f\x6e\x65"] . "\45"]; goto NX_c5; Ig0m2: if (emptyInArray($search, "\143\150\x61\156\x6e\145\x6c\x5f\151\144")) { goto RXB9z; } goto OLJLD; NX_c5: b_oEt: goto Ig0m2; og3ST: $conditions["\x6f\x72\x67\x61\x6e\151\172\141\164\x69\x6f\x6e\x5f\151\144"] = $search["\x6f\x72\x67\x61\x6e\151\172\x61\x74\x69\x6f\156\137\151\x64"]; goto q2joT; LlqfH: uY5GJ: goto aAKg8; rtR9W: tJUlF: goto SeVsy; te4n0: return ["\164\157\164\x61\x6c" => $totalCount, "\162\157\x77\x73" => $records]; goto UNM2V; SeVsy: if (emptyInArray($search, "\x63\x65\x6c\x6c\x70\150\157\156\145")) { goto b_oEt; } goto q9zdU; CFIcI: oDMTl: goto hB4W2; q2joT: PL_EB: goto MrDic; OLJLD: $conditions["\x63\150\141\x6e\x6e\x65\x6c\x5f\151\x64"] = $search["\143\x68\141\x6e\156\x65\154\137\151\x64"]; goto oR6_I; FjNId: $order = "\x72\145\147\x69\163\x74\145\162\x5f\x74\151\x6d\145\40\144\145\163\x63"; goto N28zG; ot1rh: if (in_array($sort, ["\x72\145\x67\x69\163\164\x65\162\x5f\x74\x69\x6d\145", "\164\x6f\164\141\154\137\164\x65\x73\164\x5f\x71\x75\141\x6e\x74\151\164\x79", "\164\x6f\x74\141\x6c\x5f\x74\145\163\164\137\x61\x6d\157\165\156\164", "\164\157\164\x61\154\137\141\160\160\157\151\x6e\164\137\161\x75\x61\156\x74\151\164\x79", "\154\141\164\x65\x73\x74\x5f\x6c\x6f\147\151\x6e\137\164\x69\155\145"])) { goto uY5GJ; } goto FjNId; UN3P5: $conditions["\156\x69\x63\x6b\x6e\141\155\145"] = ["\x6c\151\x6b\x65", "\x25" . $search["\x6e\x69\x63\x6b\156\141\155\145"] . "\x25"]; goto CFIcI; AWbm0: foreach ($records as &$record) { goto YY0ze; F6oMC: $record["\x6e\151\x63\153\156\x61\155\x65"] = ''; goto ahAn1; oXxMU: $record["\x68\145\x61\x64\x69\155\147\137\x75\x72\x6c"] = "\57\x73\x74\x61\164\151\x63\57\x69\155\x67\x2f\x64\x65\x66\x61\x75\154\x74\56\x70\156\x67"; goto ULVoe; ULVoe: Tkhoj: goto hCmpp; ZaKcc: iNH4i: goto P9j8Q; ahAn1: ooAYz: goto ZaKcc; hCmpp: if (!empty($record["\156\x69\x63\x6b\156\x61\x6d\x65"])) { goto ooAYz; } goto F6oMC; YY0ze: if (!empty($record["\x68\145\x61\x64\151\155\x67\x5f\165\x72\x6c"])) { goto Tkhoj; } goto oXxMU; P9j8Q: } goto ki66Y; freP_: if (emptyInArray($search, "\156\151\x63\153\x6e\x61\x6d\x65")) { goto oDMTl; } goto UN3P5; ukPIj: if (emptyInArray($search, "\x6f\x72\x67\141\156\151\x7a\141\164\151\x6f\156\137\x69\x64")) { goto PL_EB; } goto og3ST; UNM2V: } public function getInfos($customerId) { $infos = Db::table("\x63\165\163\x74\x6f\x6d\x65\x72")->where("\x69\x64", $customerId)->field(true)->find(); return $infos; } public function save($customerId, $data) { goto kHy9h; zxfIK: $data["\x6d\x6f\x64\151\x66\171\x5f\x74\x69\155\x65"] = date("\x59\x2d\155\55\144\40\110\x3a\151\x3a\163"); goto Y2SA1; kHy9h: $customerModel = CustomerModel::get($customerId); goto QPDRJ; T3ct2: exception("\xe6\x97\240\346\xb3\225\xe6\211\xbe\xe5\210\260\xe8\xaf\245\345\256\xa2\xe6\210\xb7"); goto Uzb_t; Uzb_t: vHVrn: goto zxfIK; Y2SA1: $customerModel->data($data, true)->allowField(true)->save(); goto YMsku; QPDRJ: if ($customerModel) { goto vHVrn; } goto T3ct2; YMsku: } }
